import{mergeFromGlobal as e,generateTomTomHeaders as t,getPosition as n,toPointFeature as r,views as o,bboxFromGeoJSON as i,bboxOnlyIfWithArea as s,bboxFromCoordsArray as a,plugTypes as c,currentTypes as u,avoidableTypes as p,getPositionStrict as l,generateId as A,getRoutePlanningLocationType as d,inputSectionTypesWithGuidance as R,inputSectionTypes as E,indexedMagnitudes as T}from"@tomtom-org/maps-sdk/core";var _=/* @__PURE__ */(e=>(e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.FORBIDDEN=403]="FORBIDDEN",e))(_||{});class h extends Error{constructor(e,t,n){super(e),this.service=t,this.issues=n,Error.captureStackTrace&&Error.captureStackTrace(this,h)}}const S={[_.TOO_MANY_REQUESTS]:"Too Many Requests: The API Key is over QPS (Queries per second)",[_.FORBIDDEN]:"Request failed with status code 403"};class I extends h{constructor(e,t,n){super(e,t),this.status=n,this.status&&S[this.status]&&(this.message=S[this.status])}}const g=(e,t)=>{const{data:n,message:r,status:o}=e;return new I(n?.error||n?.errorText||r,t,o)},f=(e,t,n)=>{if(e.status){const r=e;return n?n(r,t):g(r,t)}return new h(e.message,t)},m=(e,t)=>new h(e.message,t,e.issues);function N(e,t,n){function r(n,r){var o;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(o=n._zod).traits??(o.traits=/* @__PURE__ */new Set),n._zod.traits.add(e),t(n,r);for(const e in s.prototype)e in n||Object.defineProperty(n,e,{value:s.prototype[e].bind(n)});n._zod.constr=s,n._zod.def=r}const o=n?.Parent??Object;class i extends o{}function s(e){var t;const o=n?.Parent?new i:this;r(o,e),(t=o._zod).deferred??(t.deferred=[]);for(const n of o._zod.deferred)n();return o}return Object.defineProperty(i,"name",{value:e}),Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}class O extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const y={};function C(e){return y}function v(e,t){return"bigint"==typeof t?t.toString():t}function P(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function L(e){return null==e}function U(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}const b=Symbol("evaluating");function M(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==b)return void 0===r&&(r=b,r=n()),r},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function H(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function w(...e){const t={};for(const n of e){const e=Object.getOwnPropertyDescriptors(n);Object.assign(t,e)}return Object.defineProperties({},t)}const D="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function G(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const j=/* @__PURE__ */new Set(["string","number","symbol"]);function z(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function B(e,t,n){const r=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(r._zod.parent=e),r}function x(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}function F(e,t){if(!function(e){if(!1===G(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==G(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=w(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return H(this,"shape",n),n},checks:[]});return B(e,r)}function k(e,t=0){if(!0===e.aborted)return!0;for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function W(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function V(e){return"string"==typeof e?e:e?.message}function Y(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const o=V(e.inst?._zod.def?.error?.(e))??V(t?.error?.(e))??V(n.customError?.(e))??V(n.localeError?.(e))??"Invalid input";r.message=o}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function K(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}const $=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,v,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Z=N("$ZodError",$),q=N("$ZodError",$,{Parent:Error});function J(e){const t=[],n=e.map(e=>"object"==typeof e?e.key:e);for(const r of n)"number"==typeof r?t.push(`[${r}]`):"symbol"==typeof r?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push("."),t.push(r));return t.join("")}const Q=/* @__PURE__ */(e=>(t,n,r,o)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise)throw new O;if(s.issues.length){const t=new(o?.Err??e)(s.issues.map(e=>Y(e,i,C())));throw D(t,o?.callee),t}return s.value})(q),X=e=>async(t,n,r,o)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise&&(s=await s),s.issues.length){const t=new(o?.Err??e)(s.issues.map(e=>Y(e,i,C())));throw D(t,o?.callee),t}return s.value},ee=/* @__PURE__ */X(q),te=/* @__PURE__ */(e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},i=t._zod.run({value:n,issues:[]},o);if(i instanceof Promise)throw new O;return i.issues.length?{success:!1,error:new(e??Z)(i.issues.map(e=>Y(e,o,C())))}:{success:!0,data:i.value}})(q),ne=/* @__PURE__ */(e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(e=>Y(e,o,C())))}:{success:!0,data:i.value}})(q),re=/^-?\d+(?:\.\d+)?/,oe=/^(?:true|false)$/i,ie=/^undefined$/i,se=/* @__PURE__ */N("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),ae={number:"number",bigint:"bigint",object:"date"},ce=/* @__PURE__ */N("$ZodCheckLessThan",(e,t)=>{se.init(e,t);const n=ae[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ue=/* @__PURE__ */N("$ZodCheckGreaterThan",(e,t)=>{se.init(e,t);const n=ae[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),pe=/* @__PURE__ */N("$ZodCheckMaxLength",(e,t)=>{var n;se.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!L(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const o=K(r);n.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),le=/* @__PURE__ */N("$ZodCheckMinLength",(e,t)=>{var n;se.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!L(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const o=K(r);n.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Ae=/* @__PURE__ */N("$ZodCheckLengthEquals",(e,t)=>{var n;se.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!L(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{const r=n.value,o=r.length;if(o===t.length)return;const i=K(r),s=o>t.length;n.issues.push({origin:i,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),de={major:4,minor:1,patch:12},Re=/* @__PURE__ */N("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=de;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const o of r)for(const t of o._zod.onattach)t(e);if(0===r.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,n)=>{let r,o=k(e);for(const i of t){if(i._zod.def.when){if(!i._zod.def.when(e))continue}else if(o)continue;const t=e.issues.length,s=i._zod.check(e);if(s instanceof Promise&&!1===n?.async)throw new O;if(r||s instanceof Promise)r=(r??Promise.resolve()).then(async()=>{await s;e.issues.length!==t&&(o||(o=k(e,t)))});else{if(e.issues.length===t)continue;o||(o=k(e,t))}}return r?r.then(()=>e):e},n=(n,o,i)=>{if(k(n))return n.aborted=!0,n;const s=t(o,r,i);if(s instanceof Promise){if(!1===i.async)throw new O;return s.then(t=>e._zod.parse(t,i))}return e._zod.parse(s,i)};e._zod.run=(o,i)=>{if(i.skipChecks)return e._zod.parse(o,i);if("backward"===i.direction){const t=e._zod.parse({value:o.value,issues:[]},{...i,skipChecks:!0});return t instanceof Promise?t.then(e=>n(e,o,i)):n(t,o,i)}const s=e._zod.parse(o,i);if(s instanceof Promise){if(!1===i.async)throw new O;return s.then(e=>t(e,r,i))}return t(s,r,i)}}e["~standard"]={validate:t=>{try{const n=te(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return ne(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),Ee=/* @__PURE__ */N("$ZodString",(e,t)=>{var n;Re.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(n=e._zod.bag,new RegExp(`^${n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*"}$`)),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch(o){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Te=/* @__PURE__ */N("$ZodNumber",(e,t)=>{Re.init(e,t),e._zod.pattern=e._zod.bag.pattern??re,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch(s){}const o=n.value;if("number"==typeof o&&!Number.isNaN(o)&&Number.isFinite(o))return n;const i="number"==typeof o?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...i?{received:i}:{}}),n}}),_e=/* @__PURE__ */N("$ZodBoolean",(e,t)=>{Re.init(e,t),e._zod.pattern=oe,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Boolean(n.value)}catch(i){}const o=n.value;return"boolean"==typeof o||n.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),n}}),he=/* @__PURE__ */N("$ZodUndefined",(e,t)=>{Re.init(e,t),e._zod.pattern=ie,e._zod.values=/* @__PURE__ */new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,n)=>{const r=t.value;return void 0===r||t.issues.push({expected:"undefined",code:"invalid_type",input:r,inst:e}),t}}),Se=/* @__PURE__ */N("$ZodAny",(e,t)=>{Re.init(e,t),e._zod.parse=e=>e}),Ie=/* @__PURE__ */N("$ZodDate",(e,t)=>{Re.init(e,t),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=new Date(n.value)}catch(s){}const o=n.value,i=o instanceof Date;return i&&!Number.isNaN(o.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:o,...i?{received:"Invalid Date"}:{},inst:e}),n}});function ge(e,t,n){e.issues.length&&t.issues.push(...W(n,e.issues)),t.value[n]=e.value}const fe=/* @__PURE__ */N("$ZodArray",(e,t)=>{Re.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const i=[];for(let e=0;e<o.length;e++){const s=o[e],a=t.element._zod.run({value:s,issues:[]},r);a instanceof Promise?i.push(a.then(t=>ge(t,n,e))):ge(a,n,e)}return i.length?Promise.all(i).then(()=>n):n}});function me(e,t,n,r){e.issues.length&&t.issues.push(...W(n,e.issues)),void 0===e.value?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function Ne(e){const t=Object.keys(e.shape);for(const o of t)if(!e.shape?.[o]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);const n=(r=e.shape,Object.keys(r).filter(e=>"optional"===r[e]._zod.optin&&"optional"===r[e]._zod.optout));var r;return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}const Oe=/* @__PURE__ */N("$ZodObject",(e,t)=>{Re.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!n?.get){const e=t.shape;Object.defineProperty(t,"shape",{get:()=>{const n={...e};return Object.defineProperty(t,"shape",{value:n}),n}})}const r=P(()=>Ne(t));M(e._zod,"propValues",()=>{const e=t.shape,n={};for(const t in e){const r=e[t]._zod;if(r.values){n[t]??(n[t]=/* @__PURE__ */new Set);for(const e of r.values)n[t].add(e)}}return n});const o=G,i=t.catchall;let s;e._zod.parse=(t,n)=>{s??(s=r.value);const a=t.value;if(!o(a))return t.issues.push({expected:"object",code:"invalid_type",input:a,inst:e}),t;t.value={};const c=[],u=s.shape;for(const e of s.keys){const r=u[e]._zod.run({value:a[e],issues:[]},n);r instanceof Promise?c.push(r.then(n=>me(n,t,e,a))):me(r,t,e,a)}return i?function(e,t,n,r,o,i){const s=[],a=o.keySet,c=o.catchall._zod,u=c.def.type;for(const p of Object.keys(t)){if(a.has(p))continue;if("never"===u){s.push(p);continue}const o=c.run({value:t[p],issues:[]},r);o instanceof Promise?e.push(o.then(e=>me(e,n,p,t))):me(o,n,p,t)}return s.length&&n.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:i}),e.length?Promise.all(e).then(()=>n):n}(c,a,t,n,r.value,e):c.length?Promise.all(c).then(()=>t):t}});function ye(e,t,n,r){for(const i of e)if(0===i.issues.length)return t.value=i.value,t;const o=e.filter(e=>!k(e));return 1===o.length?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>Y(e,r,C())))}),t)}const Ce=/* @__PURE__ */N("$ZodUnion",(e,t)=>{Re.init(e,t),M(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),M(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),M(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),M(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>U(e.source)).join("|")})$`)}});const n=1===t.options.length,r=t.options[0]._zod.run;e._zod.parse=(o,i)=>{if(n)return r(o,i);let s=!1;const a=[];for(const e of t.options){const t=e._zod.run({value:o.value,issues:[]},i);if(t instanceof Promise)a.push(t),s=!0;else{if(0===t.issues.length)return t;a.push(t)}}return s?Promise.all(a).then(t=>ye(t,o,e,i)):ye(a,o,e,i)}}),ve=/* @__PURE__ */N("$ZodDiscriminatedUnion",(e,t)=>{Ce.init(e,t);const n=e._zod.parse;M(e._zod,"propValues",()=>{const e={};for(const n of t.options){const r=n._zod.propValues;if(!r||0===Object.keys(r).length)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(const[t,n]of Object.entries(r)){e[t]||(e[t]=/* @__PURE__ */new Set);for(const r of n)e[t].add(r)}}return e});const r=P(()=>{const e=t.options,n=/* @__PURE__ */new Map;for(const r of e){const e=r._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(const t of e){if(n.has(t))throw new Error(`Duplicate discriminator value "${String(t)}"`);n.set(t,r)}}return n});e._zod.parse=(o,i)=>{const s=o.value;if(!G(s))return o.issues.push({code:"invalid_type",expected:"object",input:s,inst:e}),o;const a=r.value.get(s?.[t.discriminator]);return a?a._zod.run(o,i):t.unionFallback?n(o,i):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:s,path:[t.discriminator],inst:e}),o)}}),Pe=/* @__PURE__ */N("$ZodTuple",(e,t)=>{Re.init(e,t);const n=t.items,r=n.length-[...n].reverse().findIndex(e=>"optional"!==e._zod.optin);e._zod.parse=(o,i)=>{const s=o.value;if(!Array.isArray(s))return o.issues.push({input:s,inst:e,expected:"tuple",code:"invalid_type"}),o;o.value=[];const a=[];if(!t.rest){const t=s.length>n.length,i=s.length<r-1;if(t||i)return o.issues.push({...t?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},input:s,inst:e,origin:"array"}),o}let c=-1;for(const e of n){if(c++,c>=s.length&&c>=r)continue;const t=e._zod.run({value:s[c],issues:[]},i);t instanceof Promise?a.push(t.then(e=>Le(e,o,c))):Le(t,o,c)}if(t.rest){const e=s.slice(n.length);for(const n of e){c++;const e=t.rest._zod.run({value:n,issues:[]},i);e instanceof Promise?a.push(e.then(e=>Le(e,o,c))):Le(e,o,c)}}return a.length?Promise.all(a).then(()=>o):o}});function Le(e,t,n){e.issues.length&&t.issues.push(...W(n,e.issues)),t.value[n]=e.value}const Ue=/* @__PURE__ */N("$ZodEnum",(e,t)=>{Re.init(e,t);const n=function(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(e=>j.has(typeof e)).map(e=>"string"==typeof e?z(e):e.toString()).join("|")})$`),e._zod.parse=(t,o)=>{const i=t.value;return r.has(i)||t.issues.push({code:"invalid_value",values:n,input:i,inst:e}),t}}),be=/* @__PURE__ */N("$ZodLiteral",(e,t)=>{if(Re.init(e,t),0===t.values.length)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(e=>"string"==typeof e?z(e):e?z(e.toString()):String(e)).join("|")})$`),e._zod.parse=(n,r)=>{const o=n.value;return e._zod.values.has(o)||n.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),n}});function Me(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}const He=/* @__PURE__ */N("$ZodOptional",(e,t)=>{Re.init(e,t),e._zod.optin="optional",e._zod.optout="optional",M(e._zod,"values",()=>t.innerType._zod.values?/* @__PURE__ */new Set([...t.innerType._zod.values,void 0]):void 0),M(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${U(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>{if("optional"===t.innerType._zod.optin){const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(t=>Me(t,e.value)):Me(r,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,n)}}),we=/* @__PURE__ */N("$ZodCustom",(e,t)=>{se.init(e,t),Re.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(t=>De(t,n,r,e));De(o,n,r,e)}});function De(e,t,n,r){if(!e){const e={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(function(...e){const[t,n,r]=e;return"string"==typeof t?{message:t,code:"custom",input:n,inst:r}:{...t}}(e))}}function Ge(e,t){return new ce({check:"less_than",...x(t),value:e,inclusive:!0})}function je(e,t){return new ue({check:"greater_than",...x(t),value:e,inclusive:!0})}function ze(e,t){return new pe({check:"max_length",...x(t),maximum:e})}function Be(e,t){return new le({check:"min_length",...x(t),minimum:e})}function xe(e,t){return new Ae({check:"length_equals",...x(t),length:e})}const Fe=/* @__PURE__ */N("ZodMiniType",(e,t)=>{if(!e._zod)throw new Error("Uninitialized schema in ZodMiniType.");Re.init(e,t),e.def=t,e.type=t.type,e.parse=(t,n)=>Q(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>te(e,t,n),e.parseAsync=async(t,n)=>ee(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>ne(e,t,n),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,n)=>B(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e)}),ke=/* @__PURE__ */N("ZodMiniString",(e,t)=>{Ee.init(e,t),Fe.init(e,t)});function We(e){return function(e,t){return new e({type:"string",...x(t)})}(ke,e)}const Ve=/* @__PURE__ */N("ZodMiniNumber",(e,t)=>{Te.init(e,t),Fe.init(e,t)});function Ye(e){return function(e,t){return new e({type:"number",checks:[],...x(t)})}(Ve,e)}const Ke=/* @__PURE__ */N("ZodMiniBoolean",(e,t)=>{_e.init(e,t),Fe.init(e,t)});function $e(e){return function(e,t){return new e({type:"boolean",...x(t)})}(Ke,e)}const Ze=/* @__PURE__ */N("ZodMiniUndefined",(e,t)=>{he.init(e,t),Fe.init(e,t)});const qe=/* @__PURE__ */N("ZodMiniAny",(e,t)=>{Se.init(e,t),Fe.init(e,t)});function Je(){return new qe({type:"any"})}const Qe=/* @__PURE__ */N("ZodMiniDate",(e,t)=>{Ie.init(e,t),Fe.init(e,t)});const Xe=/* @__PURE__ */N("ZodMiniArray",(e,t)=>{fe.init(e,t),Fe.init(e,t)});function et(e,t){return new Xe({type:"array",element:e,...x(t)})}const tt=/* @__PURE__ */N("ZodMiniObject",(e,t)=>{Oe.init(e,t),Fe.init(e,t),M(e,"shape",()=>t.shape)});function nt(e,t){const n={type:"object",shape:e??{},...x(t)};return new tt(n)}function rt(e,t){return F(e,t)}function ot(e,t){return function(e,t){const n=w(t._zod.def,{get shape(){const n=t._zod.def.shape,r={...n};for(const t in n)r[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return H(this,"shape",r),r},checks:[]});return B(t,n)}(Rt,e)}const it=/* @__PURE__ */N("ZodMiniUnion",(e,t)=>{Ce.init(e,t),Fe.init(e,t)});function st(e,t){return new it({type:"union",options:e,...x(t)})}const at=/* @__PURE__ */N("ZodMiniDiscriminatedUnion",(e,t)=>{ve.init(e,t),Fe.init(e,t)});const ct=/* @__PURE__ */N("ZodMiniTuple",(e,t)=>{Pe.init(e,t),Fe.init(e,t)});function ut(e,t,n){const r=t instanceof Re;return new ct({type:"tuple",items:e,rest:r?t:null,...x(r?n:t)})}const pt=/* @__PURE__ */N("ZodMiniEnum",(e,t)=>{Ue.init(e,t),Fe.init(e,t),e.options=Object.values(t.entries)});function lt(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new pt({type:"enum",entries:n,...x(t)})}const At=/* @__PURE__ */N("ZodMiniLiteral",(e,t)=>{be.init(e,t),Fe.init(e,t)});function dt(e,t){return new At({type:"literal",values:Array.isArray(e)?e:[e],...x(t)})}const Rt=/* @__PURE__ */N("ZodMiniOptional",(e,t)=>{He.init(e,t),Fe.init(e,t)});function Et(e){return new Rt({type:"optional",innerType:e})}const Tt=/* @__PURE__ */N("ZodMiniCustom",(e,t)=>{we.init(e,t),Fe.init(e,t)});function _t(e,t={}){return function(e,t,n){return new e({type:"custom",check:"custom",fn:t,...x(n)})}(Tt,e,t)}const ht=ot(nt({apiKey:We(),commonBaseURL:We(),customServiceBaseURL:We(),language:We()}));class St extends Error{constructor(e){super(function(e){const t=[],n=[...e.issues].sort((e,t)=>(e.path??[]).length-(t.path??[]).length);for(const r of n)t.push(`✖ ${r.message}`),r.path?.length&&t.push(`  → at ${J(r.path)}`);return t.join("\n")}(e)),this.issues=e.issues}}const It=async(n,r,o)=>{const i=r.getAPIVersion?.(n),s=e({...n,...i&&{apiVersion:i}});if(void 0===n.validateRequest||n.validateRequest)try{((e,t)=>{const n=(t?.schema?rt(ht,t.schema.shape):ht).check(_t(e=>"commonBaseURL"in e||"customServiceBaseURL"in e,"commonBaseURL or customServiceBaseURL is required"));let r;if(t?.refinements?.length){r=n;for(const e of t.refinements)r=r.check(_t(e.check,e.message))}const o=(r??n).safeParse(e);if(!o.success)throw new St(o.error)})(s,r.requestValidation)}catch(u){return Promise.reject(m(u,o))}const a=r.buildRequest(s),c=t(s);n.onAPIRequest?.(a);try{const e=await r.sendRequest(a,c);return n.onAPIResponse?.(a,e),r.parseResponse(await e.data,s)}catch(u){return n.onAPIResponse?.(a,u),Promise.reject(f(u,o,r.parseResponseError))}};class gt extends Error{constructor(e,t,n){super(t??`HTTP Error ${e}`),this.name="FetchError",this.status=e,this.data=n,Error.captureStackTrace&&Error.captureStackTrace(this,gt)}}const ft=async e=>{if(e.ok)return{data:await e.json(),status:e.status};let t,n;const r=e.headers.get("content-type");throw e.bodyUsed?t=e.statusText:r?.includes("application/json")?(n=await e.json(),t=n?.errorText??n?.message??n?.detailedError?.message):r?.includes("text/xml")&&(n=await e.text(),t=e.statusText),new gt(e.status,t,n)},mt=async(e,t)=>ft(await fetch(e,{headers:t})),Nt=async(e,t)=>ft(await fetch(e.url,{method:"POST",body:JSON.stringify(e.data),headers:{...t,"Content-Type":"application/json"}})),Ot=et(et(Ye())),yt=nt({type:lt(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection","Circle"]),coordinates:st([et(Ye()),Ot,et(et(et(Ye()))),et(et(et(et(Ye()))))]),radius:Et(Ye()),radiusMeters:Et(Ye()),bbox:Et(et(Ye()))}).check(_t(e=>"Circle"!==e.type||Boolean(e.radius),'type: "Circle" must have radius property')),Ct=nt({type:dt("Feature"),geometry:yt,id:Et(st([We(),Ye()])),properties:Je(),bbox:Et(et(Ye()))}),vt=nt({type:dt("FeatureCollection"),features:et(Ct),id:Et(st([We(),Ye()])),properties:Je(),bbox:Et(et(Ye()))}),Pt=st([ut([Ye().check(je(-180),Ge(180)),Ye().check(je(-90),Ge(90))]),ut([Ye().check(je(-180),Ge(180)),Ye().check(je(-90),Ge(90)),Ye()]),nt({type:dt("Point"),coordinates:et(Ye())}),Ct]),Lt=st([et(Ye()).check(xe(4)),et(Ye()).check(xe(6))]),Ut=st([yt,Ct,vt]),bt=st([Lt,Ut,et(Ut)]),Mt=rt(nt({query:We()}),ot(nt({position:Pt,limit:Ye().check(Ge(100)),radiusMeters:Ye(),countries:et(We()),resultType:et(We())})).shape);var Ht="object"==typeof global&&global&&global.Object===Object&&global,wt="object"==typeof self&&self&&self.Object===Object&&self,Dt=Ht||wt||Function("return this")(),Gt=Dt.Symbol,jt=Object.prototype,zt=jt.hasOwnProperty,Bt=jt.toString,xt=Gt?Gt.toStringTag:void 0;var Ft=Object.prototype.toString;var kt=Gt?Gt.toStringTag:void 0;function Wt(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":kt&&kt in Object(e)?function(e){var t=zt.call(e,xt),n=e[xt];try{e[xt]=void 0;var r=!0}catch(i){}var o=Bt.call(e);return r&&(t?e[xt]=n:delete e[xt]),o}(e):function(e){return Ft.call(e)}(e)}function Vt(e){return null!=e&&"object"==typeof e}function Yt(e){return"symbol"==typeof e||Vt(e)&&"[object Symbol]"==Wt(e)}function Kt(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}var $t=Array.isArray,Zt=Gt?Gt.prototype:void 0,qt=Zt?Zt.toString:void 0;function Jt(e){if("string"==typeof e)return e;if($t(e))return Kt(e,Jt)+"";if(Yt(e))return qt?qt.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Qt(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Xt(e){if(!Qt(e))return!1;var t=Wt(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var en,tn=Dt["__core-js_shared__"],nn=(en=/[^.]+$/.exec(tn&&tn.keys&&tn.keys.IE_PROTO||""))?"Symbol(src)_1."+en:"";var rn=Function.prototype.toString;function on(e){if(null!=e){try{return rn.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var sn=/^\[object .+?Constructor\]$/,an=Function.prototype,cn=Object.prototype,un=an.toString,pn=cn.hasOwnProperty,ln=RegExp("^"+un.call(pn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function An(e){return!(!Qt(e)||(t=e,nn&&nn in t))&&(Xt(e)?ln:sn).test(on(e));var t}function dn(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return An(n)?n:void 0}var Rn=dn(Dt,"WeakMap");var En=Date.now;var Tn,_n,hn,Sn=function(){try{var e=dn(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),In=Sn?function(e,t){return Sn(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:function(e){return e},gn=(Tn=In,_n=0,hn=0,function(){var e=En(),t=16-(e-hn);if(hn=e,t>0){if(++_n>=800)return arguments[0]}else _n=0;return Tn.apply(void 0,arguments)});var fn=/^(?:0|[1-9]\d*)$/;function mn(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&fn.test(e))&&e>-1&&e%1==0&&e<t}function Nn(e,t,n){"__proto__"==t&&Sn?Sn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function On(e,t){return e===t||e!=e&&t!=t}var yn=Object.prototype.hasOwnProperty;function Cn(e,t,n){var r=e[t];yn.call(e,t)&&On(r,n)&&(void 0!==n||t in e)||Nn(e,t,n)}var vn=Math.max;function Pn(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var Ln=Object.prototype;function Un(e){return Vt(e)&&"[object Arguments]"==Wt(e)}var bn=Object.prototype,Mn=bn.hasOwnProperty,Hn=bn.propertyIsEnumerable,wn=Un(/* @__PURE__ */function(){return arguments}())?Un:function(e){return Vt(e)&&Mn.call(e,"callee")&&!Hn.call(e,"callee")};var Dn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Gn=Dn&&"object"==typeof module&&module&&!module.nodeType&&module,jn=Gn&&Gn.exports===Dn?Dt.Buffer:void 0,zn=(jn?jn.isBuffer:void 0)||function(){return!1},Bn={};function xn(e){return function(t){return e(t)}}Bn["[object Float32Array]"]=Bn["[object Float64Array]"]=Bn["[object Int8Array]"]=Bn["[object Int16Array]"]=Bn["[object Int32Array]"]=Bn["[object Uint8Array]"]=Bn["[object Uint8ClampedArray]"]=Bn["[object Uint16Array]"]=Bn["[object Uint32Array]"]=!0,Bn["[object Arguments]"]=Bn["[object Array]"]=Bn["[object ArrayBuffer]"]=Bn["[object Boolean]"]=Bn["[object DataView]"]=Bn["[object Date]"]=Bn["[object Error]"]=Bn["[object Function]"]=Bn["[object Map]"]=Bn["[object Number]"]=Bn["[object Object]"]=Bn["[object RegExp]"]=Bn["[object Set]"]=Bn["[object String]"]=Bn["[object WeakMap]"]=!1;var Fn="object"==typeof exports&&exports&&!exports.nodeType&&exports,kn=Fn&&"object"==typeof module&&module&&!module.nodeType&&module,Wn=kn&&kn.exports===Fn&&Ht.process,Vn=function(){try{var e=kn&&kn.require&&kn.require("util").types;return e||Wn&&Wn.binding&&Wn.binding("util")}catch(t){}}(),Yn=Vn&&Vn.isTypedArray,Kn=Yn?xn(Yn):function(e){return Vt(e)&&Pn(e.length)&&!!Bn[Wt(e)]};function $n(e,t){var n=$t(e),r=!n&&wn(e),o=!n&&!r&&zn(e),i=!n&&!r&&!o&&Kn(e),s=n||r||o||i,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=a.length;for(var u in e)s&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||mn(u,c))||a.push(u);return a}var Zn=Object.prototype.hasOwnProperty;function qn(e){if(!Qt(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t,n,r=(n=(t=e)&&t.constructor,t===("function"==typeof n&&n.prototype||Ln)),o=[];for(var i in e)("constructor"!=i||!r&&Zn.call(e,i))&&o.push(i);return o}function Jn(e){return null!=(t=e)&&Pn(t.length)&&!Xt(t)?$n(e):qn(e);var t}var Qn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xn=/^\w*$/;var er=dn(Object,"create");var tr=Object.prototype.hasOwnProperty;var nr=Object.prototype.hasOwnProperty;function rr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function or(e,t){for(var n=e.length;n--;)if(On(e[n][0],t))return n;return-1}rr.prototype.clear=function(){this.__data__=er?er(null):{},this.size=0},rr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},rr.prototype.get=function(e){var t=this.__data__;if(er){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return tr.call(t,e)?t[e]:void 0},rr.prototype.has=function(e){var t=this.__data__;return er?void 0!==t[e]:nr.call(t,e)},rr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=er&&void 0===t?"__lodash_hash_undefined__":t,this};var ir=Array.prototype.splice;function sr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}sr.prototype.clear=function(){this.__data__=[],this.size=0},sr.prototype.delete=function(e){var t=this.__data__,n=or(t,e);return!(n<0)&&(n==t.length-1?t.pop():ir.call(t,n,1),--this.size,!0)},sr.prototype.get=function(e){var t=this.__data__,n=or(t,e);return n<0?void 0:t[n][1]},sr.prototype.has=function(e){return or(this.__data__,e)>-1},sr.prototype.set=function(e,t){var n=this.__data__,r=or(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var ar=dn(Dt,"Map");function cr(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function ur(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ur.prototype.clear=function(){this.size=0,this.__data__={hash:new rr,map:new(ar||sr),string:new rr}},ur.prototype.delete=function(e){var t=cr(this,e).delete(e);return this.size-=t?1:0,t},ur.prototype.get=function(e){return cr(this,e).get(e)},ur.prototype.has=function(e){return cr(this,e).has(e)},ur.prototype.set=function(e,t){var n=cr(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function pr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(pr.Cache||ur),n}pr.Cache=ur;var lr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ar=/\\(\\)?/g,dr=function(e){var t=pr(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(lr,function(e,n,r,o){t.push(r?o.replace(Ar,"$1"):n||e)}),t});function Rr(e,t){return $t(e)?e:function(e,t){if($t(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Yt(e))||Xn.test(e)||!Qn.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:dr(function(e){return null==e?"":Jt(e)}(e))}function Er(e){if("string"==typeof e||Yt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Tr(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var _r=Gt?Gt.isConcatSpreadable:void 0;function hr(e){return $t(e)||wn(e)||!!(_r&&e&&e[_r])}function Sr(e){return(null==e?0:e.length)?function(e,t,n,r,o){var i=-1,s=e.length;for(n||(n=hr),o||(o=[]);++i<s;){var a=e[i];n(a)?Tr(o,a):o[o.length]=a}return o}(e):[]}var Ir=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),gr=Function.prototype,fr=Object.prototype,mr=gr.toString,Nr=fr.hasOwnProperty,Or=mr.call(Object);function yr(e){var t=this.__data__=new sr(e);this.size=t.size}yr.prototype.clear=function(){this.__data__=new sr,this.size=0},yr.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},yr.prototype.get=function(e){return this.__data__.get(e)},yr.prototype.has=function(e){return this.__data__.has(e)},yr.prototype.set=function(e,t){var n=this.__data__;if(n instanceof sr){var r=n.__data__;if(!ar||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ur(r)}return n.set(e,t),this.size=n.size,this};var Cr="object"==typeof exports&&exports&&!exports.nodeType&&exports,vr=Cr&&"object"==typeof module&&module&&!module.nodeType&&module,Pr=vr&&vr.exports===Cr?Dt.Buffer:void 0;function Lr(){return[]}Pr&&Pr.allocUnsafe;var Ur=Object.prototype.propertyIsEnumerable,br=Object.getOwnPropertySymbols,Mr=br?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[o++]=s)}return i}(br(e),function(t){return Ur.call(e,t)}))}:Lr,Hr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Tr(t,Mr(e)),e=Ir(e);return t}:Lr;function wr(e){return function(e,t,n){var r=t(e);return $t(e)?r:Tr(r,n(e))}(e,Jn,Hr)}var Dr=dn(Dt,"DataView"),Gr=dn(Dt,"Promise"),jr=dn(Dt,"Set"),zr="[object Map]",Br="[object Promise]",xr="[object Set]",Fr="[object WeakMap]",kr="[object DataView]",Wr=on(Dr),Vr=on(ar),Yr=on(Gr),Kr=on(jr),$r=on(Rn),Zr=Wt;(Dr&&Zr(new Dr(new ArrayBuffer(1)))!=kr||ar&&Zr(new ar)!=zr||Gr&&Zr(Gr.resolve())!=Br||jr&&Zr(new jr)!=xr||Rn&&Zr(new Rn)!=Fr)&&(Zr=function(e){var t=Wt(e),n="[object Object]"==t?e.constructor:void 0,r=n?on(n):"";if(r)switch(r){case Wr:return kr;case Vr:return zr;case Yr:return Br;case Kr:return xr;case $r:return Fr}return t});var qr=Object.prototype.hasOwnProperty;var Jr=Dt.Uint8Array;function Qr(e){var t=new e.constructor(e.byteLength);return new Jr(t).set(new Jr(e)),t}var Xr=/\w*$/;var eo=Gt?Gt.prototype:void 0,to=eo?eo.valueOf:void 0;function no(e,t,n){var r,o,i,s,a,c=e.constructor;switch(t){case"[object ArrayBuffer]":return Qr(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return a=Qr((s=e).buffer),new s.constructor(a,s.byteOffset,s.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e){var t=Qr(e.buffer);return new e.constructor(t,e.byteOffset,e.length)}(e);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return(i=new(o=e).constructor(o.source,Xr.exec(o))).lastIndex=o.lastIndex,i;case"[object Symbol]":return r=e,to?Object(to.call(r)):{}}}var ro=Vn&&Vn.isMap,oo=ro?xn(ro):function(e){return Vt(e)&&"[object Map]"==Zr(e)};var io=Vn&&Vn.isSet,so=io?xn(io):function(e){return Vt(e)&&"[object Set]"==Zr(e)},ao="[object Arguments]",co="[object Function]",uo="[object Object]",po={};function lo(e,t,n,r,o,i){var s;if(n&&(s=o?n(e,r,o,i):n(e)),void 0!==s)return s;if(!Qt(e))return e;var a=$t(e);if(a)s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&qr.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e);else{var c=Zr(e),u=c==co||"[object GeneratorFunction]"==c;if(zn(e))return e.slice();if(c==uo||c==ao||u&&!o)s={};else{if(!po[c])return o?e:{};s=no(e,c)}}i||(i=new yr);var p=i.get(e);if(p)return p;i.set(e,s),so(e)?e.forEach(function(r){s.add(lo(r,t,n,r,e,i))}):oo(e)&&e.forEach(function(r,o){s.set(o,lo(r,t,n,o,e,i))});var l=a?void 0:wr(e);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}(l||e,function(r,o){l&&(r=e[o=r]),Cn(s,o,lo(r,t,n,o,e,i))}),s}function Ao(e,t){return t.length<2?e:function(e,t){for(var n=0,r=(t=Rr(t,e)).length;null!=e&&n<r;)e=e[Er(t[n++])];return n&&n==r?e:void 0}(e,function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}(t,0,-1))}function Ro(e){return null==e}function Eo(e,t){return null==(e=Ao(e,t=Rr(t,e)))||delete e[Er((n=t,r=null==n?0:n.length,r?n[r-1]:void 0))];var n,r}function To(e){return function(e){if(!Vt(e)||"[object Object]"!=Wt(e))return!1;var t=Ir(e);if(null===t)return!0;var n=Nr.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&mr.call(n)==Or}(e)?void 0:e}po[ao]=po["[object Array]"]=po["[object ArrayBuffer]"]=po["[object DataView]"]=po["[object Boolean]"]=po["[object Date]"]=po["[object Float32Array]"]=po["[object Float64Array]"]=po["[object Int8Array]"]=po["[object Int16Array]"]=po["[object Int32Array]"]=po["[object Map]"]=po["[object Number]"]=po[uo]=po["[object RegExp]"]=po["[object Set]"]=po["[object String]"]=po["[object Symbol]"]=po["[object Uint8Array]"]=po["[object Uint8ClampedArray]"]=po["[object Uint16Array]"]=po["[object Uint32Array]"]=!0,po["[object Error]"]=po[co]=po["[object WeakMap]"]=!1;var _o=function(e){return gn(function(e,t,n){return t=vn(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=vn(r.length-t,0),s=Array(i);++o<i;)s[o]=r[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=r[o];return a[t]=n(s),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,a)}}(e,void 0,Sr),e+"")}(function(e,t){var n={};if(null==e)return n;var r=!1;t=Kt(t,function(t){return t=Rr(t,e),r||(r=t.length>1),t}),function(e,t,n){var r=!n;n||(n={});for(var o=-1,i=t.length;++o<i;){var s=t[o],a=void 0;void 0===a&&(a=e[s]),r?Nn(n,s,a):Cn(n,s,a)}}(e,wr(e),n),r&&(n=lo(n,7,To));for(var o=t.length;o--;)Eo(n,t[o]);return n});const ho={SPORTS_CENTER:7320,STADIUM:7374,RESTAURANT:7315,CAFE_PUB:9376,HEALTH_CARE_SERVICE:9663,HOSPITAL:7321,HOSPITAL_POLYCLINIC:7321,DOCTOR:9373,SHOP:9361,MARIJUANA_DISPENSARY:9364,MARKET:7332,PUBLIC_AMENITY:9932,ROAD_TRAFFIC_CONTROL_CENTER:7301,POST_OFFICE:7324,COLLEGE_UNIVERSITY:7377,OPEN_PARKING_AREA:7369,CLUB_ASSOCIATION:9937,CAMPING_GROUND:7360,HOLIDAY_RENTAL:7304,VACATION_RENTAL:7304,AMUSEMENT_PARK:9902,RESIDENTIAL_ACCOMMODATION:7303,AGRICULTURAL_BUSINESS:7335,AGRICULTURE:7335,AIRPORT:7383,COMPANY:9352,NIGHTLIFE:9379,REPAIR_SHOP:7310,REPAIR_FACILITY:7310,HOTEL_MOTEL:7314,SCHOOL:7372,AUTOMOTIVE_DEALER:9910,MOVIE_THEATER:7342,CINEMA:7342,THEATER:7318,PARK_RECREATION_AREA:9362,PLACE_OF_WORSHIP:7339,IMPORTANT_TOURIST_ATTRACTION:7376,TOURIST_ATTRACTION:7376,TRAIL_SYSTEM:7302,TRAILS:7302,RAILWAY_STATION:7380,PUBLIC_TRANSPORT_STOP:9942,EXCHANGE:9160,MARINA:7347,WEIGH_STATION:7359,CAR_WASH:9155,LEISURE_CENTER:9378,ACCESS_GATEWAY:7389,GEOGRAPHIC_FEATURE:8099,URBAN_STATION:7380004,ADVENTURE_VEHICLE_TRAIL:7302003,ADVERTISING_COMPANY:9352003,AFGHAN_RESTAURANT:7315081,AFRICAN_RESTAURANT:7315002,AGRICULTURAL_SUPPLIES:9361073,AGRICULTURAL_TECHNOLOGY:9352012,AIRFIELD:7383005,AIRLINE_COMPANY:9352034,AIRLINE_ACCESS:7389002,ALGERIAN_RESTAURANT:7315082,AMBULANCE_UNIT:9663005,AMERICAN_RESTAURANT:7315003,AMPHITHEATER:7318007,AMUSEMENT_ARCADE:9902002,AMUSEMENT_PLACE:9902004,ANIMAL_SERVICES:9361048,ANIMAL_SHELTER:9352045,ANTIQUE_ART_SHOP:9361049,APARTMENT_RENTAL:7304006,AQUATIC_ZOO:9927004,ARABIAN_RESTAURANT:7315083,ARCH:7376012,ARGENTINIAN_RESTAURANT:7315084,ARMENIAN_RESTAURANT:7315085,ART_SCHOOL:7372012,ASHRAM:7339007,ASIAN_RESTAURANT:7315062,ATHLETICS_TRACK:7374002,ATV_DEALER:9910009,AUSTRALIAN_RESTAURANT:7315086,AUSTRIAN_RESTAURANT:7315004,AUTOMOBILE_COMPANY:9352013,AUTOMOBILE_MANUFACTURING:9352041,BAGS_LEATHERWEAR:9361058,BANQUET_ROOMS:7315146,BAR:9379004,BARBECUE_RESTAURANT:7315005,BASEBALL_PARK:7374009,BASKETBALL_ARENA:7374012,BASQUE_RESTAURANT:7315087,BATTLEFIELD:9362002,BAY:8099016,BEACH_CLUB:9937002,BEAUTY_SALON:9361067,BEAUTY_SUPPLIES:9361050,B_B_GUEST_HOUSE:7314002,BELGIAN_RESTAURANT:7315006,BETTING_STATION:9361072,BISTRO:7315007,BLOOD_BANK:9663004,BOAT_DEALER:9910004,BOAT_LAUNCHING_RAMP:9362032,BOATING_EQUIPMENT_ACCESSORIES:9361083,BODYSHOP:7310002,BOLIVIAN_RESTAURANT:7315088,BOOK_SHOP:9361002,BOSNIAN_RESTAURANT:7315089,BOWLING_CENTER:9378002,BRAZILIAN_RESTAURANT:7315072,BRIDGE:7376010,BRIDGE_TUNNEL_OPERATIONS:9352035,BRITISH_RESTAURANT:7315008,BUFFET_RESTAURANT:7315142,BUILDING:7376002,BULGARIAN_RESTAURANT:7315090,BUNGALOW_RENTAL:7304004,BURMESE_RESTAURANT:7315091,BUS_DEALER:9910008,BUS_CHARTER_COMPANY:9352025,BUS_LINES:9352027,BUS_STOP:9942002,BUSINESS_SERVICES:9352039,CABARET_THEATER:7318006,CABINS_LODGES:7314007,CABLE_TELEPHONE_COMPANY:9352040,CAFE:9376002,CAFETERIA:7315147,CALIFORNIAN_RESTAURANT:7315009,CAMBODIAN_RESTAURANT:7315092,CANADIAN_RESTAURANT:7315010,CAPE:8099020,CAR_DEALER:9910002,CAR_GLASS_REPLACEMENT_SHOP:7310003,CARAVAN_SITE:7360003,CARIBBEAN_RESTAURANT:7315011,CATERING_SERVICES:9352043,CAVE:8099003,C_DS_DVD_VIDEOS:9361003,VIDEO_RENTAL_SHOP:9361044,CEMETERY:9362003,CHALET_RENTAL:7304005,CHEMICAL_COMPANY:9352014,CHICKEN_RESTAURANT:7315070,CHILD_CARE_FACILITY:7372003,CHILEAN_RESTAURANT:7315093,CHINESE_RESTAURANT:7315012,CHRISTMAS_HOLIDAY_SHOP:9361082,CHURCH:7339002,CLEANING_SERVICES:9352029,CHILDRENS_CLOTHES:9361004,FOOTWEAR_SHOE_REPAIRS:9361005,CLOTHING_SHOP:9361006,MENS_CLOTHING:9361007,SPECIALTY_CLOTHING_SHOP:9361079,WOMENS_CLOTHING:9361008,COACH_STOP:9942005,COCKTAIL_BAR:9379006,COFFEE_SHOP:9376006,COLOMBIAN_RESTAURANT:7315094,COMEDY_CLUB:9379009,COMPUTER_DATA_SERVICES:9352004,SOFTWARE_COMPANY:9352005,CONCERT_HALL:7318002,CONDOMINIUM_COMPLEX:7303006,CONSTRUCTION_COMPANY:9352032,CONSTRUCTION_MATERIAL_EQUIPMENT:9361042,CONVENIENCE_STORE:9361009,CORSICAN_RESTAURANT:7315095,COTTAGE_RENTAL:7304002,COVE:8099017,CREOLE_RESTAURANT:7315063,CREPERIE:7315013,CRICKET_GROUND:7374003,CUBAN_RESTAURANT:7315096,CULINARY_SCHOOL:7372015,CYPRIOT_RESTAURANT:7315097,CZECH_RESTAURANT:7315068,DAM:7376007,DANCE_STUDIO_SCHOOL:9378003,DANISH_RESTAURANT:7315098,DELICATESSEN:9361060,DINNER_THEATER:7318008,DISCO_CLUB:9379002,DIVERSIFIED_FINANCIALS:9352006,DOMINICAN_RESTAURANT:7315099,DONGBEI_RESTAURANT:7315057,DOUGHNUT_RESTAURANT:7315079,DRIVE_THROUGH_BOTTLE_SHOP:9361076,DRIVE_IN_MOVIES:7342003,DRIVING_SCHOOL:7372016,DRUG_STORE:9361051,DRY_CLEANER:9361010,DUNE:8099005,DUTCH_RESTAURANT:7315014,EGYPTIAN_RESTAURANT:7315100,ELECTRICAL_APPLIANCES_SHOP:9361052,CAMERAS_PHOTOGRAPHY:9361011,COMPUTER_COMPUTER_SUPPLIES:9361012,CONSUMER_ELECTRONICS:9361013,OFFICE_EQUIPMENT:9361014,ENGLISH_RESTAURANT:7315101,EQUIPMENT_RENTAL:9352038,EROTIC_RESTAURANT:7315132,ETHIOPIAN_RESTAURANT:7315102,EXOTIC_RESTAURANT:7315133,FACTORY_OUTLET:9361016,FAIRGROUND:9362017,FARM:7335004,FARMERS_MARKET:7332004,FAST_FOOD:7315015,PHILIPPINE_RESTAURANT:7315016,FINNISH_RESTAURANT:7315104,FISHING_HUNTING_AREA:9362016,FITNESS_CLUB_CENTER:7320002,FLATS_APARTMENT_COMPLEX:7303003,FLORISTS:9361017,FLYING_CLUB:9378004,FONDUE_RESTAURANT:7315134,BAKERY:9361018,BUTCHER:9361019,FISHMONGER:9361020,FOOD_MARKET:9361021,GREENGROCER:9361022,GROCERY_STORE:9361023,OTHER_FOOD_SHOPS:9361024,WINE_SPIRITS:9361025,FOOTBALL_STADIUM:7374010,FOREST_AREA:9362015,FRENCH_RESTAURANT:7315017,FUNERAL_SERVICE_MORTUARIES:9352036,FURNITURE_HOME_FURNISHINGS:9361054,FUSION_RESTAURANT:7315071,CAR_REPAIR_AND_SERVICE:7310004,GENERAL_PRACTITIONER:9373002,GERMAN_RESTAURANT:7315018,GIFTS_CARDS_NOVELTIES_SOUVENIRS:9361026,GLASSWARE_CERAMIC_SHOP:9361055,GOLD_EXCHANGE:9160003,GREEK_RESTAURANT:7315019,GRILL_RESTAURANT:7315020,GUANGDONG_RESTAURANT:7315054,GURUDWARA:7339006,HAIRDRESSER:9361027,HAMBURGER_RESTAURANT:7315069,HARBOR:8099018,HARDWARE_STORE:9361069,HAWAIIAN_RESTAURANT:7315021,HIGH_SCHOOL:7372006,HIKING_TRAIL:7302004,HILL:8099025,HISTORIC_SITE:9362004,HISTORICAL_PARK:9362005,HOBBY_SHOP:9361053,HOCKEY_CLUB:9937003,HOME_APPLIANCE_REPAIR:9352044,HORSE_RACING_TRACK:7374005,HORSE_RIDING_CENTER:7320003,HORTICULTURE:7335002,HOSPITAL_FOR_WOMEN_AND_CHILDREN:7321005,HOSPITAL_OF_CHINESE_MEDICINE:7321004,HOSTEL:7314004,HOT_POT_RESTAURANT:7315058,HOTEL:7314003,CARPET_FLOOR_COVERINGS:9361028,CURTAINS_TEXTILES:9361029,DO_IT_YOURSELF_CENTERS:9361030,HOUSE_GARDEN_FURNITURE_FITTINGS:9361031,GARDEN_CENTERS_SERVICES:9361032,GLASS_WINDOWS_STORE:9361080,KITCHENS_BATHROOMS:9361033,LIGHTING_SHOPS:9361034,PAINTING_DECORATING:9361035,HUNAN_RESTAURANT:7315052,HUNGARIAN_RESTAURANT:7315022,ICE_CREAM_PARLOR:7315078,ICE_HOCKEY_ARENA:7374008,IMPORT_EXPORT_AND_DISTRIBUTION:9352042,INDIAN_RESTAURANT:7315023,INDONESIAN_RESTAURANT:7315024,INFORMAL_MARKET:7332002,INSURANCE_COMPANY:9352007,INTERNATIONAL_RESTAURANT:7315073,INTERNATIONAL_RAILROAD_STATION:7380002,INTERNET_CAFE:9376004,INVESTMENT_ADVISOR:9352037,IRANIAN_RESTAURANT:7315105,IRISH_RESTAURANT:7315065,ISLAND:8099022,ISRAELI_RESTAURANT:7315106,ITALIAN_RESTAURANT:7315025,JAMAICAN_RESTAURANT:7315066,JAPANESE_RESTAURANT:7315026,JAZZ_CLUB:9379008,JEWELRY_CLOCKS_WATCHES:9361036,JEWISH_RESTAURANT:7315027,JUNIOR_COLLEGE_COMMUNITY_COLLEGE:7377003,KARAOKE_CLUB:9379010,KOREAN_RESTAURANT:7315028,KOSHER_RESTAURANT:7315067,LAGOON:8099019,LAKESHORE:9362006,LANGUAGE_SCHOOL:7372010,LATIN_AMERICAN_RESTAURANT:7315029,LAUNDRY:9361045,LEBANESE_RESTAURANT:7315030,LEGAL_SERVICES:9352023,LOCAL_POST_OFFICE:7324003,LOCAL_SPECIALITIES_SHOP:9361056,LOCALE:8099027,LOTTERY_SHOP:9361071,LUXEMBOURGIAN_RESTAURANT:7315107,MACROBIOTIC_RESTAURANT:7315135,MAGHRIB_RESTAURANT:7315108,DELIVERY_SERVICE:9352008,MALTESE_RESTAURANT:7315031,MANUFACTURING_COMPANY:9352011,MARINE_ELECTRONIC_EQUIPMENT:9361065,MARSH:8099023,MAURITIAN_RESTAURANT:7315109,MAUSOLEUM_GRAVE:7376011,MECHANICAL_ENGINEERING:9352016,MEDICAL_SUPPLIES_EQUIPMENT:9361043,MEDITERRANEAN_RESTAURANT:7315032,MEMORIAL:9362007,SUBWAY_STATION:7380005,MEXICAN_RESTAURANT:7315033,MICROBREWERY:9376007,MIDDLE_EASTERN_RESTAURANT:7315034,MIDDLE_SCHOOL:7372014,MILITARY_AIRPORT:7383004,MINERAL_HOT_SPRINGS:8099021,MINING_COMPANY:9352031,MOBILE_PHONE_SHOP:9361075,MONGOLIAN_RESTAURANT:7315110,MONUMENT:7376003,MOROCCAN_RESTAURANT:7315074,MOSQUE:7339003,MOTEL:7314006,MOTOR_RACING_STADIUM:7374011,MOTORCYCLE_DEALER:9910003,MOTORCYCLE_REPAIR:7310008,MOUNTAIN_BIKE_TRAIL:7302002,MOUNTAIN_PEAK:8099002,MOVING_STORAGE_COMPANY:9352033,MULTI_PURPOSE_STADIUM:7374006,MUSIC_CENTER:7318003,MUSIC_INSTRUMENTS_STORE:9361059,MUSSELS_RESTAURANT:7315136,NAIL_SALON:9361068,NATIONAL_RAILROAD_STATION:7380003,NATURAL_RECREATION_ATTRACTION:9362030,NEPALESE_RESTAURANT:7315111,NETBALL_STADIUM:7374014,NEWSAGENTS_TOBACCONISTS:9361037,NORWEGIAN_RESTAURANT:7315112,OASIS:8099011,OBSERVATORY:7376005,OEM:9352021,OIL_NATURAL_GAS:9352030,OPERA_HOUSE:7318004,OPTICIAN:9361038,ORGANIC_FOOD_RESTAURANT:7315075,ORIENTAL_RESTAURANT:7315035,OTHER_REPAIR_SHOPS:7310005,OTHER_WINTER_SPORT:9362025,PAGODA:7339008,PAKISTANI_RESTAURANT:7315127,PAN:8099009,PARK:9362008,PARKWAY:9362009,PASSENGER_TRANSPORT_TICKET_OFFICE:9932002,PAWN_SHOP:9361070,PEDESTRIAN_SUBWAY:9932003,PERSONAL_CARE_FACILITY:9663003,PERSONAL_SERVICE:9663002,PERUVIAN_RESTAURANT:7315061,PET_SUPPLIES:9361064,PHARMACEUTICAL_COMPANY:9352018,PHOTO_LAB_DEVELOPMENT:9361046,PHOTOCOPY_SHOP:9361047,PICNIC_AREA:9362033,PIZZERIA:7315036,PLAIN_FLAT:8099007,PLANETARIUM:7376006,PLATEAU:8099008,POLISH_RESTAURANT:7315037,POLYNESIAN_RESTAURANT:7315129,PORTUGUESE_RESTAURANT:7315038,PRE_SCHOOL:7372004,PRESERVE:9362010,PRIMARY_PRODUCER:7335003,PRIMARY_SCHOOL:7372005,PRIVATE_AIRPORT:7383003,PRIVATE_CLUB:9379003,PROVENCAL_RESTAURANT:7315130,PUB:9376003,PUB_FOOD:7315039,PUBLIC_MARKET:7332003,PUBLIC_AIRPORT:7383002,PUBLIC_CALL_BOX:9932004,PUBLIC_HEALTH_TECHNOLOGY_COMPANY:9352017,PUBLISHING_TECHNOLOGIES:9352019,QUARRY:8099026,RACE_TRACK:7374013,RAILROAD_SIDING:7380006,RAPIDS:8099015,REAL_ESTATE_COMPANY:9352009,REAL_ESTATE_AGENT:9361015,RECREATION_AREA:9362011,RECREATIONAL_CAMPING_GROUND:7360002,RECREATIONAL_VEHICLE_DEALER:9910005,RECYCLING_SHOP:9361057,REEF:8099014,RESERVOIR:8099013,RESIDENTIAL_ESTATE:7303004,RESORT:7314005,REST_CAMP:7314008,RETAIL_OUTLET:9361063,RETIREMENT_COMMUNITY:7303002,RIDGE:8099004,RIVER_CROSSING:8099024,ROAD_RESCUE:9932006,ROADSIDE_RESTAURANT:7315041,ROCK_CLIMBING_TRAIL:7302006,ROCKS:8099012,RUGBY_GROUND:7374007,ROMANIAN_RESTAURANT:7315131,RUSSIAN_RESTAURANT:7315040,SALAD_BAR:7315143,CAR_ACCESSORIES:7310006,SANDWICH_RESTAURANT:7315042,SAUNA_SOLARIUM_MASSAGE:9378005,SAVINGS_INSTITUTION:9352010,SAVOY_RESTAURANT:7315113,SCANDINAVIAN_RESTAURANT:7315114,SCOTTISH_RESTAURANT:7315115,SEAFOOD:7315043,SEASHORE:9362013,SECURED_ENTRANCE:7389004,SECURITY_PRODUCTS:9361078,SENIOR_HIGH_SCHOOL:7372007,SERVICE_COMPANY:9352002,SHANDONG_RESTAURANT:7315053,SHANGHAI_RESTAURANT:7315055,SHOPPING_SERVICE:9361062,SICHUAN_RESTAURANT:7315056,SICILIAN_RESTAURANT:7315116,SKI_RESORT:9362026,SLAVIC_RESTAURANT:7315117,SLOVAK_RESTAURANT:7315080,SNACKS_RESTAURANT:7315139,SNOOKER_POOL_BILLIARD:9378006,SOCCER_STADIUM:7374004,SOUL_FOOD:7315064,SOUP_RESTAURANT:7315140,SPANISH_RESTAURANT:7315044,SPECIAL_HOSPITAL:7321003,SPECIAL_SCHOOL:7372013,SPECIALIST:9373003,SPECIALTY_FOODS:9361061,SPORT_SCHOOL:7372011,SPORTS_EQUIPMENT_CLOTHING:9361039,STAMP_SHOP:9361074,STATION_ACCESS:7389003,STATUE:7376013,STEAK_HOUSE:7315045,STOCK_EXCHANGE:9160002,SUDANESE_RESTAURANT:7315118,SUPERMARKETS_HYPERMARKETS:7332005,SURINAMESE_RESTAURANT:7315046,SUSHI_RESTAURANT:7315148,SWEDISH_RESTAURANT:7315119,SWISS_RESTAURANT:7315047,SYNAGOG:7339004,SYRIAN_RESTAURANT:7315120,TAILOR_SHOP:9361077,TAIWANESE_RESTAURANT:7315059,TAKEOUT_FOOD:7315145,TAPAS_RESTAURANT:7315076,TAX_SERVICES:9352022,TAXI_STAND:9942003,TAXI_LIMOUSINE_SHUTTLE_SERVICE:9352026,TEA_HOUSE:9376005,TECHNICAL_SCHOOL:7372009,TELECOMMUNICATIONS:9352020,TEMPLE:7339005,TEPPANYAKI_RESTAURANT:7315121,THAI_RESTAURANT:7315048,THEMATIC_SPORT_CENTER:7320005,TIBETAN_RESTAURANT:7315122,PUBLIC_TOILET:9932005,TOWER:7376009,TOWNHOUSE_COMPLEX:7303005,TOYS_GAMES_SHOP:9361040,TRAFFIC_SERVICE_CENTER:7301002,TRAFFIC_CONTROL_DEPARTMENT:7301002,STREETCAR_STOP:9942004,TRANSPORT_COMPANY:9352024,TRAVEL_AGENT:9361041,TRUCK_DEALER:9910006,TRUCK_REPAIR_AND_SERVICE:7310009,TRUCK_WASH:9155003,TUNISIAN_RESTAURANT:7315123,TUNNEL:7376008,TURKISH_RESTAURANT:7315049,TIRE_SERVICE:7310007,URUGUAYAN_RESTAURANT:7315124,VALLEY:8099006,VAN_DEALER:9910007,VARIETY_STORE:9361081,VEGETARIAN_RESTAURANT:7315050,VENEZUELAN_RESTAURANT:7315125,VIETNAMESE_RESTAURANT:7315051,VILLA_RENTAL:7304003,VOCATIONAL_SCHOOL:7372008,WATER_HOLE:7376014,WEDDING_SERVICES:9352046,WEIGH_SCALES:7359003,WELL:8099010,WELSH_RESTAURANT:7315126,WESTERN_RESTAURANT:7315060,WHOLESALE_CLUB:9361066,WILDERNESS_AREA:9362014,WILDLIFE_PARK:9927005,WINE_BAR:9379007,YACHT_BASIN:7347003,YOGURT_JUICE_BAR:7315149,ZOO:9927003,ZOOS_ARBORETA_BOTANICAL_GARDEN:9927,ELECTRONICS_COMPANY:9352015,RIVER_SCENIC_AREA:9362036,HORSE_RIDING_TRAIL:7302005,NATURAL_TOURIST_ATTRACTION:7376004,OPEN_CAR_PARKING_AREA:7369002,MEDICINAL_MARIJUANA_DISPENSARY:9364002,RECREATIONAL_MARIJUANA_DISPENSARY:9364003,ICE_SKATING_RINK:9360,TENNIS_COURT:9369,GOLF_COURSE:9911,WATER_SPORT:9371,SWIMMING_POOL:7338,RESTAURANT_AREA:9359,DENTIST:9374,VETERINARIAN:9375,PHARMACY:7326,EMERGENCY_ROOM:9956,DEPARTMENT_STORE:7327,SHOPPING_CENTER:7373,FIRE_STATION_BRIGADE:7392,NON_GOVERNMENTAL_ORGANIZATION:9152,PRISON_CORRECTIONAL_FACILITY:9154,EMBASSY:7365,LIBRARY:9913,TRANSPORT_AUTHORITY_VEHICLE_REGISTRATION:9151,WELFARE_ORGANIZATION:9153,NATIVE_RESERVATION:9389,COURTHOUSE:9363,POLICE_STATION:7322,PRIMARY_RESOURCE_UTILITY:9150,GOVERNMENT_OFFICE:7367,MILITARY_INSTALLATION:9388,RENT_A_CAR_PARKING:9930,MUSEUM:7317,INDUSTRIAL_BUILDING:9383,PARKING_GARAGE:7313,TOURIST_INFORMATION_OFFICE:7316,MEDIA_FACILITY:9158,WINERY:7349,EMERGENCY_MEDICAL_SERVICE:7391,CASINO:7341,MANUFACTURING_FACILITY:9156,COMMERCIAL_BUILDING:9382,CULTURAL_CENTER:7319,EXHIBITION_CONVENTION_CENTER:9377,RENT_A_CAR_FACILITY:7312,TRUCK_STOP:7358,ADVENTURE_SPORTS_FACILITY:7305,ADVENTURE_SPORTS_VENUE:7305,REST_AREA:7395,RESEARCH_FACILITY:9157,COURIER_DROP_BOX:7388,GAS_STATION:7311,PETROL_STATION:7311,FUEL_FACILITIES:7311,MOTORING_ORGANIZATION_OFFICE:7368,CASH_DISPENSER:7397,ATM:7397,COMMUNITY_CENTER:7363,BEACH:9357,PORT_WAREHOUSE_FACILITY:9159,ELECTRIC_VEHICLE_STATION:7309,SCENIC_PANORAMIC_VIEW:7337,ENTERTAINMENT:9900,BUSINESS_PARK:7378,BANK:7328,HELIPAD_HELICOPTER_LANDING:7308,CHECKPOINT:9955,FRONTIER_CROSSING:7366,MOUNTAIN_PASS:9935,TOLL_GATE:7375,FERRY_TERMINAL:7352},So=(e,t)=>{e.append("apiVersion",String(t.apiVersion)),e.append("key",t.apiKey),t.language&&e.append("language",t.language)},Io=(e,t,n)=>{for(const r of n||[])e.append(t,r)},go=(e,t,n)=>{Array.isArray(n)&&n.length>0&&e.append(t,n.join(","))},fo=(e,t,n)=>{!Ro(n)&&e.append(t,String(n))},mo=(e,t)=>{const r=n(t);r&&(e.append("lat",String(r[1])),e.append("lon",String(r[0])))},No="/maps/orbis/places",Oo=(e,t)=>{const n=e.searchParams;So(n,t),fo(n,"limit",t.limit),mo(n,t.position),go(n,"fuelSet",t.fuelTypes),go(n,"idxSet",t.indexes),go(n,"brandSet",t.poiBrands),t.poiCategories&&go(n,"categorySet",t.poiCategories.map(e=>"number"!=typeof e?ho[e]:e)),go(n,"connectorSet",t.connectors),go(n,"mapcodes",t.mapcodes),go(n,"extendedPostalCodesFor",t.extendedPostalCodesFor),fo(n,"minPowerKW",t.minPowerKW),fo(n,"maxPowerKW",t.maxPowerKW),fo(n,"view",t.view),fo(n,"openingHours",t.openingHours),fo(n,"timeZone",t.timeZone),fo(n,"relatedPois",t.relatedPois),go(n,"entityTypeSet",t.geographyTypes)},yo=e=>{const t=new URL(`${n=e,n.customServiceBaseURL||`${n.commonBaseURL}${No}/autocomplete/${n.query}.json`}`);var n;const r=t.searchParams;return e.language=e.language??"en-GB",So(r,e),fo(r,"limit",e.limit),mo(r,e.position),go(r,"countrySet",e.countries),fo(r,"radius",e.radiusMeters),go(r,"resultSet",e.resultType),t},Co=e=>{const t=e.split(",");return[Number(t[1]),Number(t[0])]},vo=e=>`${e[1]},${e[0]}`,Po=e=>{let t,n;return void 0!==e.topLeftPoint?(t=[e.topLeftPoint.lon,e.btmRightPoint.lat],n=[e.btmRightPoint.lon,e.topLeftPoint.lat]):(t=Co(e.southWest),n=Co(e.northEast)),[t[0],t[1],n[0],n[1]]},Lo=e=>[e.lon,e.lat],Uo=e=>{const{position:t,...n}=e.context.geoBias||{};return{...e,context:{...e.context,geoBias:{...t&&{position:Lo(t)},radiusMeters:n.radius}}}},bo={requestValidation:{schema:Mt},buildRequest:yo,sendRequest:mt,parseResponse:Uo},Mo=async(e,t)=>It(e,{...bo,...t},"Autocomplete"),Ho={autocompleteSearch:Mo,buildAutocompleteSearchRequest:yo,parseAutocompleteSearchResponse:Uo,autocompleteSearchTemplate:bo},wo=nt({id:We()}),Do=e=>{const t=new URL((e=>e.customServiceBaseURL??`${e.commonBaseURL}${No}/ev/id`)(e)),n=t.searchParams;return So(n,e),n.append("id",e.id),t},Go=e=>e<12?"slow":e<50?"regular":e<150?"fast":"ultra-fast",jo=e=>{const t={count:0,statusCounts:{}};for(const n of e)for(const e of n.chargingPoints)t.count++,t.statusCounts[e.status]=(t.statusCounts[e.status]||0)+1;return t},zo=(e,t)=>e.type===t.type&&e.ratedPowerKW===t.ratedPowerKW,Bo=(e,t,n)=>{if(e)for(const r of e){const e=n.find(e=>zo(r,e.connector));if(e){if(e.count++,t){const n=e.statusCounts;e.statusCounts[t]=(n[t]||0)+1}}else n.push({connector:r,count:1,statusCounts:t?{[t]:1}:{}})}},xo=e=>{const t=[];return((e,t)=>{if(e)for(const n of e){const e=t.find(e=>zo(n,e.connector));e?e.count++:t.push({connector:n,count:1})}})(e,t),t},Fo=e=>{const t=[];for(const n of e)for(const e of n.chargingPoints)Bo(e.connectors,e.status,t);return t},ko=e=>{const{year:t,month:n,day:r}=(e=>{const t=e.split("-");return{year:Number.parseInt(t[0]),month:Number.parseInt(t[1]),day:Number.parseInt(t[2])}})(e.date);return{dateYYYYMMDD:e.date,year:t,month:n,day:r,hour:e.hour,minute:e.minute,date:new Date(t,n-1,r,e.hour,e.minute)}},Wo=e=>1===e.length&&0===e[0].start.hour&&0===e[0].end.hour,Vo=e=>{const t=e.timeRanges.map(e=>({start:ko(e.startTime),end:ko(e.endTime)}));return{mode:e.mode,timeRanges:t,alwaysOpenThisPeriod:Wo(t)}},Yo=e=>{const{position:t,entryPoints:n,poi:o,id:i,dist:s,boundingBox:a,chargingPark:c,...u}=e,p=c?.connectors?.map(e=>({..._o(e,"connectorType"),type:e.connectorType,chargingSpeed:Go(e.ratedPowerKW)}));return{...r(Lo(t)),...a&&{bbox:Po(a)},id:i,properties:{..._o(u,"viewport"),...s&&{distance:s},...n?.length&&{entryPoints:n.map(e=>({...e,position:Lo(e.position)}))},...p?.length&&{chargingPark:{...c,connectors:p.map(e=>({...e,chargingSpeed:Go(e.ratedPowerKW)})),connectorCounts:xo(p)}},...o&&{poi:{..._o(o,"categorySet","openingHours"),brands:o?.brands?.map(e=>e.name)??[],categoryIds:o?.categorySet?.map(e=>e.id)??[],...o?.openingHours&&{openingHours:Vo(o?.openingHours)}}}}}},Ko=e=>{const{geoBias:t,...n}=e;return{...t&&{geoBias:Lo(t)},...n}},$o=e=>{const t=e.results?.[0];return t?{id:t.id,accessType:t.accessType,chargingStations:(n=t.chargingStations,n.map(e=>({...e,chargingPoints:e.chargingPoints.map(e=>({...e,connectors:e.connectors?.map(e=>({...e,chargingSpeed:Go(e.ratedPowerKW)}))}))}))),chargingPointAvailability:jo(t.chargingStations),connectorAvailabilities:Fo(t.chargingStations),...t.openingHours&&{openingHours:Vo(t.openingHours)}}:void 0;var n},Zo={requestValidation:{schema:wo},buildRequest:Do,sendRequest:mt,parseResponse:$o,parseResponseError:(e,t)=>{const n=e.data?.detailedError?.message??e.message;return new I(n,t,e.status)}},qo={buildEVChargingStationsAvailabilityRequest:Do,parseEVChargingStationsAvailabilityResponse:$o,evChargingStationsAvailabilityTemplate:Zo},Jo=ot(nt({typeahead:$e(),offset:Ye().check(Ge(1900)),radiusMeters:Ye(),boundingBox:bt,countries:et(We())})),Qo=rt(nt({query:We()}),ot(nt({position:Pt,limit:Ye().check(Ge(100)),extendedPostalCodesFor:et(We()),mapcodes:et(We()),view:lt(o),geographyTypes:et(We())})).shape),Xo=rt(Qo,Jo.shape),ei=e=>e?Array.isArray(e)?e.join(","):"string"==typeof e?e:String(e):"",ti=(e,t)=>{const n=e.length;if(n<=t)return e;const r=[];let o;const i=Math.ceil(n/t);for(o=0;o<n;o+=i)r.push(e[o]);return o>=n-i&&(r.length<t?r.push(e[n-1]):r[r.length-1]=e[n-1]),r},ni=e=>{const t=new URL(`${(e=>e.customServiceBaseURL||`${e.commonBaseURL}${No}/geocode`)(e)}/${e.query}.json`),n=t.searchParams;So(n,e),e.typeahead&&n.append("typeahead",String(e.typeahead)),!Ro(e.limit)&&n.append("limit",String(e.limit)),!Ro(e.offset)&&n.append("ofs",String(e.offset)),mo(n,e.position),e.countries&&n.append("countrySet",ei(e.countries)),!Ro(e.radiusMeters)&&n.append("radius",String(e.radiusMeters));const r=e.boundingBox&&i(e.boundingBox);return r&&(n.append("topLeft",ei([r[3],r[0]])),n.append("btmRight",ei([r[1],r[2]]))),e.extendedPostalCodesFor&&n.append("extendedPostalCodesFor",ei(e.extendedPostalCodesFor)),e.mapcodes&&n.append("mapcodes",ei(e.mapcodes)),e.view&&n.append("view",e.view),e.geographyTypes&&n.append("entityTypeSet",ei(e.geographyTypes)),t},ri=e=>{const{position:t,boundingBox:n,dist:o,entryPoints:i,addressRanges:s,entityType:a,id:c,...u}=e;return{...r(Lo(t)),...n&&{bbox:Po(n)},id:c,properties:{..._o(u,"viewport"),...o&&{distance:o},...a&&{geographyType:a.split(",")},...i&&{entryPoints:i.map(e=>({...e,position:Lo(e.position)}))},...s&&{addressRanges:{...s,from:Lo(s.from),to:Lo(s.to)}}}}},oi=e=>{const t=e.results.map(ri),n=s(i(t));return{type:"FeatureCollection",features:t,...n&&{bbox:n}}},ii={requestValidation:{schema:Xo},buildRequest:ni,sendRequest:mt,parseResponse:oi},si={buildGeocodingRequest:ni,parseGeocodingResponse:oi,geocodingTemplate:ii},ai=rt(nt({geometries:st([vt,et(st([We(),Ct])).check(Be(1),ze(20))])}),ot(nt({zoom:Ye().check(je(0),Ge(22))})).shape),ci=e=>e.map(e=>e.properties.dataSources?.geometry?.id).filter(e=>e),ui=e=>{const t=new URL((e=>e.customServiceBaseURL||`${e.commonBaseURL}${No}/additionalData.json`)(e)),n=t.searchParams;return n.append("apiVersion",String(e.apiVersion)),n.append("key",e.apiKey),((e,t)=>{let n;n=Array.isArray(t)?"string"==typeof t[0]?t:ci(t):ci(t.features),e.append("geometries",ei(n))})(n,e.geometries),fo(n,"geometriesZoom",e.zoom),t},pi=e=>{const t=e.additionalData.flatMap(e=>e.geometryData?.features.map(e=>({...e,bbox:i(e.geometry)}))).filter(e=>e);return{type:"FeatureCollection",bbox:i(t),features:t}},li={requestValidation:{schema:ai},buildRequest:ui,sendRequest:mt,parseResponse:pi},Ai={buildGeometryDataRequest:ui,parseGeometryDataResponse:pi,geometryDataTemplate:li},di=nt(ho),Ri=rt(Qo,ot(nt({indexes:et(We()),poiCategories:et(st([Ye(),function(e){const t=e._zod.def.shape;return lt(Object.keys(t))}(di)])),poiBrands:et(We()),connectors:et(We()),fuelTypes:et(We()),openingHours:We(),timeZone:We(),relatedPois:We(),minPowerKW:Ye(),maxPowerKW:Ye(),minFuzzyLevel:Ye(),mixFuzzyLevel:Ye()})).shape),Ei=rt(Ri,nt({geometries:et(st([vt,yt]))}).shape),Ti=e=>{switch(e.type){case"Circle":return[{type:"CIRCLE",radius:e.radius,position:vo(e.coordinates)}];case"Polygon":return[{type:"POLYGON",vertices:ti(e.coordinates[0],50).map(e=>vo(e))}];case"MultiPolygon":return e.coordinates.length>50?(e=>{let t=/* @__PURE__ */new Map;return e.coordinates.forEach(e=>{const n=a(e[0]);if(n){const r=Math.abs((n[2]-n[0])*(n[3]-n[1]));t.set(e,r)}}),t=new Map([...t.entries()].sort((e,t)=>t[1]-e[1]).splice(0,50)),[...t.keys()]})(e).flatMap(e=>Ti({type:"Polygon",coordinates:e})):e.coordinates.flatMap(e=>Ti({type:"Polygon",coordinates:e}));case"FeatureCollection":return e.features.flatMap(e=>Ti(e.geometry));default:throw new Error(`Type ${e.type} is not supported`)}},_i=e=>{const t=new URL(`${n=e,n.customServiceBaseURL??`${n.commonBaseURL}${No}/geometrySearch/${n.query}.json`}`);var n;return Oo(t,e),{url:t,data:{geometryList:e.geometries.flatMap(Ti)}}},hi=e=>{const t=e.results.map(Yo),n=s(i(t));return{type:"FeatureCollection",properties:{...Ko(e.summary)},features:t,...n&&{bbox:n}}},Si={requestValidation:{schema:Ei},buildRequest:_i,sendRequest:Nt,parseResponse:hi},Ii=async(e,t)=>It(e,{...Si,...t},"GeometrySearch"),gi={geometrySearch:Ii,buildGeometrySearchRequest:_i,parseGeometrySearchResponse:hi,geometrySearchTemplate:Si},fi=rt(nt({entityId:We()}),ot(nt({mapcodes:et(We()),view:lt(o),openingHours:We(),timeZone:We(),relatedPois:We()})).shape),mi=e=>{const t=new URL(`${(e=>e.customServiceBaseURL||`${e.commonBaseURL}${No}/place.json`)(e)}`),n=t.searchParams;return So(n,e),fo(n,"entityId",e.entityId),go(n,"mapcodes",e.mapcodes),fo(n,"view",e.view),fo(n,"openingHours",e.openingHours),fo(n,"timeZone",e.timeZone),fo(n,"relatedPois",e.relatedPois),t},Ni=e=>e.results?.length?Yo(e.results[0]):void 0,Oi={requestValidation:{schema:fi},buildRequest:mi,sendRequest:mt,parseResponse:Ni},yi={buildPlaceByIdRequest:mi,parsePlaceByIdResponse:Ni,placeByIdTemplate:Oi},Ci=Ye().check(function(e,t){return new ue({check:"greater_than",...x(t),value:e,inclusive:!1})}(0,vi));var vi;const Pi=Ye().check(je(0)),Li=Ye().check(je(0),Ge(100)),Ui=Et(Ci),bi=Et(Pi),Mi=Et(Ye().check(je(0),Ge(1))),Hi=nt({speedKMH:Ye(),consumptionUnitsPer100KM:Ye()}),wi={efficiency:Et(nt({acceleration:Mi,deceleration:Mi,uphill:Mi,downhill:Mi}))},Di=et(Hi).check(Be(1),ze(25)),Gi=nt({...wi,speedsToConsumptionsLiters:Di,auxiliaryPowerInLitersPerHour:bi,fuelEnergyDensityInMJoulesPerLiter:Et(Ye().check(je(1)))}),ji=nt({...wi,speedsToConsumptionsKWH:Di,auxiliaryPowerInkW:bi,consumptionInKWHPerKMAltitudeGain:Et(Ye().check(Ge(500))),recuperationInKWHPerKMAltitudeLoss:bi}),zi=nt({currentType:lt(u),plugTypes:et(lt(c)).check(Be(1)),efficiency:Mi,baseLoadInkW:bi,maxPowerInkW:bi,maxVoltageInV:bi,maxCurrentInA:bi,voltageRange:Et(nt({minVoltageInV:bi,maxVoltageInV:Et(Ye())}))}),Bi=nt({stateOfChargeInkWh:Pi,maxPowerInkW:Ci}),xi=nt({maxChargeKWH:Ci,batteryCurve:Et(et(Bi).check(ze(20))),chargingConnectors:Et(et(zi).check(Be(1))),chargingTimeOffsetInSec:bi}),Fi=nt({consumption:Gi}),ki=nt({consumption:ji,charging:Et(xi)}),Wi=Et(nt({lengthMeters:Ui,widthMeters:Ui,heightMeters:Ui,weightKG:Ui,axleWeightKG:Ui})),Vi=nt({variantId:We()}),Yi=nt({dimensions:Wi,engine:Et(st([Fi,ki]))}),Ki=Et(st([Vi,Yi])),$i=nt({heading:Et(Ye().check(je(0),Ge(360)))}),Zi=rt($i,nt({currentFuelInLiters:Pi}).shape),qi=st([rt($i,nt({currentChargePCT:Li}).shape),rt($i,nt({currentChargeInkWh:Pi}).shape)]),Ji=nt({minChargeAtDestinationPCT:Li,minChargeAtChargingStopsPCT:Ye().check(je(0),Ge(50))}),Qi=nt({minChargeAtDestinationInkWh:Pi,minChargeAtChargingStopsInkWh:Pi}),Xi=nt({chargingPreferences:Et(st([Ji,Qi]))}),es={model:Ki,restrictions:Et(nt({loadTypes:Et(et(lt(["USHazmatClass1","USHazmatClass2","USHazmatClass3","USHazmatClass4","USHazmatClass5","USHazmatClass6","USHazmatClass7","USHazmatClass8","USHazmatClass9","otherHazmatExplosive","otherHazmatGeneral","otherHazmatHarmfulToWater"]))),maxSpeedKMH:Et(Ye().check(je(0),Ge(250))),adrCode:Et(lt(["B","C","D","E"])),commercial:Et($e())}))},ts=nt({...es,engineType:function(e){return function(e,t){return new e({type:"undefined",...x(t)})}(Ze,e)}(),state:Et($i),preferences:Et(nt({}))}),ns=st([function(e,t,n){return new at({type:"union",options:t,discriminator:e,...x(n)})}("engineType",[nt({...es,engineType:dt("combustion"),state:Et(Zi),preferences:Et(nt({}))}),nt({...es,engineType:dt("electric"),state:Et(qi),preferences:Et(Xi)})]),ts]),rs=ot(nt({costModel:ot(nt({avoid:et(lt(p)),traffic:Et(lt(["live","historical"])),routeType:Et(lt(["fast","short","efficient","thrilling"])),thrillingParams:Et(nt({hilliness:Et(lt(["low","normal","high"])),windingness:Et(lt(["low","normal","high"]))}))})),travelMode:We(),vehicle:ns,when:nt({option:lt(["departAt","arriveBy"]),date:function(e){return function(e,t){return new e({type:"date",...x(t)})}(Qe,e)}()})})),os=rt(rs,rt(nt({origin:Pt,budget:nt({type:lt(["timeMinutes","remainingChargeCPT","spentChargePCT","spentFuelLiters","distanceKM"]),value:Ye().check(je(0))})}),nt({maxFerryLengthMeters:Et(Ye().check(je(0)))}).shape).shape),is=e=>e.map(e=>`${e.speedKMH},${e.consumptionUnitsPer100KM}`).join(":"),ss=(e,t,n)=>{((e,t)=>{t&&(!Ro(t.acceleration)&&e.append("accelerationEfficiency",String(t.acceleration)),!Ro(t.deceleration)&&e.append("decelerationEfficiency",String(t.deceleration)),!Ro(t.uphill)&&e.append("uphillEfficiency",String(t.uphill)),!Ro(t.downhill)&&e.append("downhillEfficiency",String(t.downhill)))})(e,n.consumption.efficiency),"electric"===t?(((e,t)=>{t.speedsToConsumptionsKWH&&e.append("constantSpeedConsumptionInkWhPerHundredkm",is(t.speedsToConsumptionsKWH)),!Ro(t.auxiliaryPowerInkW)&&e.append("auxiliaryPowerInkW",String(t.auxiliaryPowerInkW)),!Ro(t.consumptionInKWHPerKMAltitudeGain)&&e.append("consumptionInkWhPerkmAltitudeGain",String(t.consumptionInKWHPerKMAltitudeGain)),!Ro(t.recuperationInKWHPerKMAltitudeLoss)&&e.append("recuperationInkWhPerkmAltitudeLoss",String(t.recuperationInKWHPerKMAltitudeLoss))})(e,n.consumption),((e,t)=>{const n=t.charging;n?.maxChargeKWH&&e.append("maxChargeInkWh",String(n.maxChargeKWH))})(e,n)):((e,t)=>{const n=t.consumption;n.speedsToConsumptionsLiters&&e.append("constantSpeedConsumptionInLitersPerHundredkm",is(n.speedsToConsumptionsLiters)),!Ro(n.auxiliaryPowerInLitersPerHour)&&e.append("auxiliaryPowerInLitersPerHour",String(n.auxiliaryPowerInLitersPerHour)),!Ro(n.fuelEnergyDensityInMJoulesPerLiter)&&e.append("fuelEnergyDensityInMJoulesPerLiter",String(n.fuelEnergyDensityInMJoulesPerLiter))})(e,n)},as=(e,t)=>{t.model&&("variantId"in t.model?e.append("vehicleModelId",t.model.variantId):(((e,t)=>{t&&(t.lengthMeters&&e.append("vehicleLength",String(t.lengthMeters)),t.heightMeters&&e.append("vehicleHeight",String(t.heightMeters)),t.widthMeters&&e.append("vehicleWidth",String(t.widthMeters)),t.weightKG&&e.append("vehicleWeight",String(t.weightKG)),t.axleWeightKG&&e.append("vehicleAxleWeight",String(t.axleWeightKG)))})(e,t.model.dimensions),t.model.engine&&ss(e,"engineType"in t?t.engineType:void 0,t.model.engine)))},cs=(e,t)=>{t&&("electric"===t.engineType&&e.append("vehicleEngineType","electric"),as(e,t),((e,t)=>{if(t.state&&(t.state.heading&&e.append("vehicleHeading",String(t.state.heading)),"engineType"in t))if("combustion"===t.engineType){const n=t.state;n.currentFuelInLiters&&e.append("currentFuelInLiters",String(n.currentFuelInLiters))}else if("electric"===t.engineType){const n=t.state,r=n,o=n;if(r.currentChargeInkWh)e.append("currentChargeInkWh",String(r.currentChargeInkWh));else if(o.currentChargePCT&&t.model&&"engine"in t.model&&t.model.engine){const n=t.model.engine,r=n.charging?.maxChargeKWH;r&&e.append("currentChargeInkWh",String(r*o.currentChargePCT/100))}}})(e,t),((e,t)=>{if(t.preferences&&"engineType"in t&&"electric"===t.engineType){const n=t.preferences;if(n.chargingPreferences){const r=n.chargingPreferences,o=r,i=r;if(o.minChargeAtChargingStopsInkWh||o.minChargeAtDestinationInkWh)e.append("minChargeAtDestinationInkWh",String(o.minChargeAtDestinationInkWh)),e.append("minChargeAtChargingStopsInkWh",String(o.minChargeAtChargingStopsInkWh));else if((i.minChargeAtChargingStopsPCT||i.minChargeAtDestinationPCT)&&t.model&&"engine"in t.model&&t.model.engine){const n=t.model.engine,r=n.charging?.maxChargeKWH;r&&(e.append("minChargeAtDestinationInkWh",String(r*i.minChargeAtDestinationPCT/100)),e.append("minChargeAtChargingStopsInkWh",String(r*i.minChargeAtChargingStopsPCT/100)))}}}})(e,t),((e,t)=>{const n=t.restrictions;n&&(Io(e,"vehicleLoadType",n.loadTypes),n.adrCode&&e.append("vehicleAdrTunnelRestrictionCode",n.adrCode),n.commercial&&e.append("vehicleCommercial",String(n.commercial)),n.maxSpeedKMH&&e.append("vehicleMaxSpeed",String(n.maxSpeedKMH)))})(e,t))},us=(e,t)=>{const n=t.costModel;Io(e,"avoid",n?.avoid),fo(e,"traffic",n?.traffic),((e,t)=>{if(t?.date){const n=t.date.toISOString();"departAt"===t.option?e.append("departAt",n):"arriveBy"===t.option&&e.append("arriveAt",n)}})(e,t.when),fo(e,"routeType",n?.routeType),fo(e,"travelMode",t.travelMode),cs(e,t.vehicle)},ps=e=>{const t=new URL((e=>e.customServiceBaseURL||`${e.commonBaseURL}/routing/1/calculateReachableRange/${vo(l(e.origin))}/json`)(e)),n=t.searchParams;return So(n,e),us(n,e),fo(n,"maxFerryLengthInMeters",e.maxFerryLengthMeters),t},ls=(e,t)=>{const n={type:"Polygon",coordinates:[e.reachableRange.boundary.map(e=>[e.longitude,e.latitude])]};return{type:"Feature",geometry:n,bbox:i(n),properties:t}},As={buildReachableRangeRequest:ps,parseReachableRangeResponse:ls,reachableRangeTemplate:{requestValidation:{schema:os},buildRequest:ps,sendRequest:mt,parseResponse:ls}},ds=e=>{const t=l(e.position),n=new URL(`${(e=>e.customServiceBaseURL||`${e.commonBaseURL}${No}/reverseGeocode`)(e)}/${t[1]},${t[0]}.json`),r=n.searchParams;return So(r,e),e.allowFreeformNewline&&r.append("allowFreeformNewline",String(e.allowFreeformNewline)),e.geographyType&&r.append("entityType",ei(e.geographyType)),!Ro(e.heading)&&r.append("heading",String(e.heading)),e.mapcodes&&r.append("mapcodes",ei(e.mapcodes)),e.number&&r.append("number",e.number),!Ro(e.radiusMeters)&&r.append("radius",String(e.radiusMeters)),e.returnSpeedLimit&&r.append("returnSpeedLimit",String(e.returnSpeedLimit)),e.returnRoadUse&&r.append("returnRoadUse",String(e.returnRoadUse)),e.roadUses&&r.append("roadUse",JSON.stringify(e.roadUses)),n},Rs=(e,t)=>{const n=r(l(t.position)),o=e.addresses[0],{boundingBox:i,sideOfStreet:s,offsetPosition:a,...c}=o?.address||{};return{...n,...i&&{bbox:Po(i)},id:A(),...o&&{properties:{type:o?.entityType?"Geography":c.streetNumber?"Point Address":"Street",address:c,...o.dataSources&&{dataSources:o.dataSources},...o.mapcodes&&{mapcodes:o.mapcodes},...s&&{sideOfStreet:s},...a&&{offsetPosition:Co(a)},originalPosition:Co(o.position)}}}},Es={requestValidation:{schema:rt(nt({position:Pt}),ot(nt({allowFreeformNewline:$e(),geographyType:et(We()),heading:Ye().check(je(-360),Ge(360)),mapcodes:et(We()),number:We(),radiusMeters:Ye(),returnMatchType:$e(),returnRoadUse:$e(),returnSpeedLimit:$e(),roadUses:et(We()),view:lt(o)})).shape)},buildRequest:ds,sendRequest:mt,parseResponse:Rs},Ts={buildRevGeoRequest:ds,parseRevGeoResponse:Rs,reverseGeocodingTemplate:Es},_s=st([Pt,yt]),hs=st([Ot,Ct]),Ss=rt(rs,rt(nt({locations:et(st([_s,hs])).check(Be(1))}),ot(nt({computeAdditionalTravelTimeFor:lt(["none","all"]),vehicleHeading:Ye().check(je(0),Ge(359.5)),maxAlternatives:Ye().check(je(0),Ge(5)),sectionTypes:et(lt(R))})).shape).shape),Is=e=>e.vehicle?.preferences?.chargingPreferences,gs=e=>Array.isArray(e)?e:e.geometry.coordinates,fs=(e,t,n)=>((e,t)=>e.map(e=>{const n=vo(l(e,{useEntryPoint:t})),r=(e=>e.properties||null)(e)?.radiusMeters;return r?`circle(${n},${r})`:n}).join(":"))(t.includes("path")?((e,t,n)=>{let r;const o=e[0];r="path"===t[0]?gs(o)[0]:l(o,{useEntryPoint:n});const i=e[e.length-1];let s;if("path"===t[t.length-1]){const e=gs(i);s=e[e.length-1]}else s=l(i,{useEntryPoint:n});return[r,s]})(e,t,n):e,n),ms=e=>({latitude:e[1],longitude:e[0]}),Ns=(e,t,n)=>{const r=[],o=[];return e.forEach((i,s)=>{"path"===t[s]?((e,t,n,r,o)=>{const i=r.length;for(const s of gs(e))r.push(ms(s));Array.isArray(e)||(e.properties.sections.leg.forEach((e,n)=>{(t>0||n>0)&&o.push({supportingPointIndex:i+e.startPointIndex,waypointSourceType:"USER_DEFINED"})}),t<n.length-1&&o.push({supportingPointIndex:i+e.geometry.coordinates.length-1,waypointSourceType:"USER_DEFINED"}))})(i,s,e,r,o):((e,t,n,r,o,i)=>{r.push(ms(l(e,{useEntryPoint:i}))),t>0&&t<n.length-1&&o.push({supportingPointIndex:r.length-1,waypointSourceType:"USER_DEFINED"})})(i,s,e,r,o,n)}),{supportingPoints:r,...o.length&&{pointWaypoints:o}}},Os=e=>{const t=e.locations.map(d),n=e.useEntryPoints??"main-when-available",r=new URL(`${(e=>e.customServiceBaseURL||`${e.commonBaseURL}/maps/orbis/routing/${Is(e)?"calculateLongDistanceEVRoute":"calculateRoute"}`)(e)}/${fs(e.locations,t,n)}/json`),o=r.searchParams;So(o,e),"language"in e||o.append("language","en-GB"),us(o,e),fo(o,"computeTravelTimeFor",e.computeAdditionalTravelTimeFor),((e,t)=>{if(t?.guidance){const n=t.guidance;e.append("instructionsType",n.type),e.append("guidanceVersion",String(n.version??2)),e.append("instructionPhonetics",n.phonetics??"IPA"),e.append("instructionRoadShieldReferences",n.roadShieldReferences??"all"),e.append("language",t.language??"en-US")}})(o,e),!Ro(e.maxAlternatives)&&o.append("maxAlternatives",String(e.maxAlternatives)),((e,t,n)=>{const r=(t??(n?R:E)).map(e=>"vehicleRestricted"===e?"travelMode":e);Io(e,"sectionType",r)})(o,e.sectionTypes,!!e.guidance?.type);for(const s of e.extendedRouteRepresentations??["distance","travelTime"])o.append("extendedRouteRepresentation",s);const i=((e,t,n)=>{const r=t.includes("path"),o=!!Is(e);if(!r&&!o)return null;const i=e.vehicle?.model,s=i?.engine?.charging;return{...r&&Ns(e.locations,t,n),...o&&s&&{chargingParameters:_o(s,"maxChargeKWH")}}})(e,t,n);return i?{method:"POST",url:r,data:i}:{method:"GET",url:r}},ys=e=>{switch(e){case"Direct_Current":return"DC";case"Alternating_Current_1_Phase":return"AC1";case"Alternating_Current_3_Phase":return"AC3";default:return}},Cs=(e,t)=>{const n=e.chargingConnectionInfo,r=e.chargingParkLocation,o=[r.coordinate.longitude,r.coordinate.latitude],i=[r.street,r.houseNumber].filter(Boolean),s=i.length>0?i.join(", "):"";return{type:"Feature",id:e.chargingParkId,geometry:{type:"Point",coordinates:o},properties:{..._o(e,["chargingConnectionInfo","chargingParkLocation"]),type:"POI",address:{freeformAddress:s,...r.street&&{streetName:r.street},...r.houseNumber&&{streetNumber:r.houseNumber},...r.city&&{municipality:r.city},...r.region&&{countrySubdivision:r.region},...r.postalCode&&{postalCode:r.postalCode},...r.country&&{country:r.country}},...n&&{chargingConnectionInfo:{plugType:n.chargingPlugType,currentInA:n.chargingCurrentInA,voltageInV:n.chargingVoltageInV,chargingPowerInkW:n.chargingPowerInkW,currentType:ys(n.chargingCurrentType),chargingSpeed:Go(n.chargingPowerInkW)}},...t&&{targetChargeInPCT:100*e.targetChargeInkWh/t},...e.chargingParkPowerInkW&&{chargingParkSpeed:Go(e.chargingParkPowerInkW)}}}},vs=(e,t)=>{const n=t?.vehicle?.model?.engine?.charging?.maxChargeKWH;return{lengthInMeters:e.lengthInMeters,historicTrafficTravelTimeInSeconds:e.historicTrafficTravelTimeInSeconds,liveTrafficIncidentsTravelTimeInSeconds:e.liveTrafficIncidentsTravelTimeInSeconds,noTrafficTravelTimeInSeconds:e.noTrafficTravelTimeInSeconds,trafficDelayInSeconds:e.trafficDelayInSeconds,trafficLengthInMeters:e.trafficLengthInMeters,travelTimeInSeconds:e.travelTimeInSeconds,departureTime:new Date(e.departureTime),arrivalTime:new Date(e.arrivalTime),deviationDistanceInMeters:e.deviationDistance,fuelConsumptionInLiters:e.fuelConsumptionInLiters,...e.deviationPoint&&{deviationPoint:[e.deviationPoint.longitude,e.deviationPoint.latitude]},totalChargingTimeInSeconds:e.totalChargingTimeInSeconds,batteryConsumptionInkWh:e.batteryConsumptionInkWh,...n&&e.batteryConsumptionInkWh&&{batteryConsumptionInPCT:100*e.batteryConsumptionInkWh/n},remainingChargeAtArrivalInkWh:e.remainingChargeAtArrivalInkWh,...n&&e.remainingChargeAtArrivalInkWh&&{remainingChargeAtArrivalInPCT:100*e.remainingChargeAtArrivalInkWh/n},...e.chargingInformationAtEndOfLeg&&{chargingInformationAtEndOfLeg:Cs(e.chargingInformationAtEndOfLeg,n)}}},Ps=(e,t)=>e.reduce((e,n,r)=>{const o=0===r?0:e[r-1]?.endPointIndex;let i;return Ro(o)||(i=0===o?n.points?.length>0?n.points.length-1:0:o+n.points?.length),e.push({...!Ro(o)&&{startPointIndex:o},...i&&{endPointIndex:i},summary:vs(n.summary,t),id:A()}),e},[]),Ls=e=>({id:A(),startPointIndex:e.startPointIndex,endPointIndex:e.endPointIndex}),Us=e=>({...Ls(e),index:e.importantRoadStretchIndex,streetName:e.streetName?.text,roadNumbers:e.roadNumbers?.map(e=>e.text)}),bs=e=>({...Ls(e),countryCodeISO3:e.countryCode}),Ms=e=>"other"===e.travelMode?Ls(e):null,Hs=e=>{if(e.tec?.causes?.length)return e.tec.causes.map(e=>(e=>{switch(e){case 1:return"jam";case 2:return"accident";case 3:return"roadworks";case 4:return"narrow-lanes";case 5:return"road-closed";case 9:return"danger";case 11:return"animals-on-road";case 13:return"broken-down-vehicle";case 16:return"lane-closed";case 17:return"wind";case 18:return"fog";case 19:return"rain";case 22:return"frost";case 23:return"flooding";default:return"other"}})(e.mainCauseCode));switch(e.simpleCategory){case"JAM":return["jam"];case"ROAD_WORK":return["roadworks"];case"ROAD_CLOSURE":return["road-closed"];default:return["other"]}},ws=e=>({...Ls(e),delayInSeconds:e.delayInSeconds,effectiveSpeedInKmh:e.effectiveSpeedInKmh,categories:Hs(e),magnitudeOfDelay:T[e.magnitudeOfDelay],tec:e.tec}),Ds=e=>({...Ls(e),lanes:e.lanes,laneSeparators:e.laneSeparators,properties:e.properties}),Gs=e=>({...Ls(e),maxSpeedLimitInKmh:e.maxSpeedLimitInKmh}),js=e=>({...Ls(e),roadShieldReferences:e.roadShieldReferences}),zs=(e,t)=>(t[e]||(t[e]=[]),t[e]),Bs=e=>{switch(e.sectionType){case"CAR_TRAIN":return{sectionType:"carTrain",mappingFunction:Ls};case"COUNTRY":return{sectionType:"country",mappingFunction:bs};case"FERRY":return{sectionType:"ferry",mappingFunction:Ls};case"MOTORWAY":return{sectionType:"motorway",mappingFunction:Ls};case"PEDESTRIAN":return{sectionType:"pedestrian",mappingFunction:Ls};case"TOLL_VIGNETTE":return{sectionType:"tollVignette",mappingFunction:bs};case"TOLL":return{sectionType:"toll",mappingFunction:Ls};case"TRAFFIC":return{sectionType:"traffic",mappingFunction:ws};case"TRAVEL_MODE":return{sectionType:"vehicleRestricted",mappingFunction:Ms};case"TUNNEL":return{sectionType:"tunnel",mappingFunction:Ls};case"UNPAVED":return{sectionType:"unpaved",mappingFunction:Ls};case"URBAN":return{sectionType:"urban",mappingFunction:Ls};case"CARPOOL":return{sectionType:"carpool",mappingFunction:Ls};case"LOW_EMISSION_ZONE":return{sectionType:"lowEmissionZone",mappingFunction:Ls};case"LANES":return{sectionType:"lanes",mappingFunction:Ds};case"SPEED_LIMIT":return{sectionType:"speedLimit",mappingFunction:Gs};case"ROAD_SHIELDS":return{sectionType:"roadShields",mappingFunction:js};case"IMPORTANT_ROAD_STRETCH":return{sectionType:"importantRoadStretch",mappingFunction:Us}}},xs=(e,t)=>{const n={leg:Ps(e.legs,t)};return((e,t)=>{if(Array.isArray(e))for(const n of e){const e=Bs(n),r=e?.mappingFunction(n);r&&zs(e.sectionType,t).push(r)}})(e.sections,n),n},Fs=1e-4,ks=(e,t)=>Math.abs(e[0]-t[0])<Fs&&Math.abs(e[1]-t[1])<Fs,Ws=(e,t)=>{const n=[];let r=0;for(const o of e.instructions){const e=[o.maneuverPoint.longitude,o.maneuverPoint.latitude];for(let n=r;n<t.length;n++){if(ks(t[n],e)){r=n;break}if(n===t.length-1)break}n.push({...o,maneuverPoint:e,pathPointIndex:r,routePath:o.routePath.map(e=>({...e,point:[e.point.longitude,e.point.latitude]}))})}return{instructions:n}},Vs=(e,t)=>{const n=e.routes.map((e,n)=>((e,t,n)=>{const r={type:"LineString",coordinates:e.legs.flatMap(e=>e.points?.map(e=>[e.longitude,e.latitude]))},o=i(r),s=A();return{type:"Feature",geometry:r,id:s,...o&&{bbox:o},properties:{id:s,index:t,summary:vs(e.summary,n),sections:xs(e,n),...e.guidance&&{guidance:Ws(e.guidance,r.coordinates)},...e.progress&&{progress:e.progress}}}})(e,n,t)),r=i(n);return{type:"FeatureCollection",...r&&{bbox:r},features:n}},Ys={requestValidation:{schema:Ss,refinements:[{check:e=>!!e.locations.map(d).includes("path")||e.locations.length>=2,message:"When passing waypoints only: at least 2 must be defined. If passing also paths, at least one path must be defined"}]},buildRequest:Os,sendRequest:async(e,t)=>{const n=e.method;if("GET"===n)return mt(e.url,t);if("POST"===n)return Nt(e,t);throw new Error(`Unsupported HTTP method received: ${n}`)},parseResponse:Vs,parseResponseError:(e,t)=>{const{data:n,message:r,status:o}=e;return new I(n?.error?.description??n?.detailedError?.message??r,t,o)},getAPIVersion:()=>2},Ks={reverseGeocode:Ts,geocode:si,geometryData:Ai,geometrySearch:gi,calculateRoute:{buildCalculateRouteRequest:Os,parseCalculateRouteResponse:Vs,calculateRouteTemplate:Ys},reachableRange:As,evChargingStationsAvailability:qo,placeByID:yi,autocompleteSearch:Ho},$s=async(e,t)=>It(e,{...Zo,...t},"EVChargingStationsAvailability"),Zs=async e=>{const t=e.properties.dataSources?.chargingAvailability?.id;if(!t)return e;try{const n=await $s({id:t}),r=e.properties.poi;return n?{...e,properties:{...e.properties,...r&&{poi:{...r,openingHours:n.openingHours}},chargingPark:{...e.properties.chargingPark,availability:n}}}:e}catch(n){return console.error(n),e}},qs=async(e,t={includeIfAvailabilityUnknown:!0})=>{const n=[];for(const r of e.features){const e=await Zs(r);(e.properties.chargingPark?.availability||t.includeIfAvailabilityUnknown)&&n.push(e)}return{...e,features:n,bbox:i(n)}},Js=async(e,t)=>It(e,{...ii,...t},"Geocode"),Qs=async e=>(await Js({query:e,limit:1})).features[0];async function Xs(e,t){const n=await It(e,{...li,...t},"GeometryData");return Array.isArray(e.geometries)||"FeatureCollection"!==e.geometries.type?n:((e,t)=>{const n=e.features.reduce((e,t)=>{const n=t.properties.dataSources?.geometry?.id;return n&&(e[n]={...t.properties,placeCoordinates:t.geometry.coordinates}),e},{}),r=t.features.map(e=>e.id&&n[e.id]?{...e,properties:n[e.id]}:e);return{type:"FeatureCollection",bbox:t.bbox,features:r}})(e.geometries,n)}const ea=async(e,t)=>It(e,{...Oi,...t},"PlaceById"),ta=async(e,t)=>It(e,{...Es,...t},"ReverseGeocode"),na=async(e,t)=>It(e,{...Ys,...t},"Routing"),ra=rt(Ri,rt(Jo,ot(nt({minFuzzyLevel:Ye().check(je(1),Ge(4)),maxFuzzyLevel:Ye().check(je(1),Ge(4))})).shape).shape),oa=e=>{let t;switch(e.type){case"COORDINATE":t={...e,details:{position:Lo(e.details)}};break;case"NEARBY":t={...e,details:{position:Lo({lon:e.details.lon,lat:e.details.lat}),text:e.details.text,query:e.details.query}};break;case"BOOKMARK":case"W3W":t=e}return t},ia={requestValidation:{schema:ra},buildRequest:e=>{const t=new URL(`${n=e,n.customServiceBaseURL??`${n.commonBaseURL}${No}/search/${n.query}.json`}`);var n;Oo(t,e);const r=t.searchParams;fo(r,"typeahead",e.typeahead),fo(r,"ofs",e.offset),go(r,"countrySet",e.countries),fo(r,"radius",e.radiusMeters);const o=e.boundingBox&&i(e.boundingBox);return o&&(r.append("topLeft",ei([o[3],o[0]])),r.append("btmRight",ei([o[1],o[2]]))),fo(r,"minFuzzyLevel",e.minFuzzyLevel),fo(r,"maxFuzzyLevel",e.maxFuzzyLevel),t},sendRequest:mt,parseResponse:e=>{const t=e.results.map(Yo),n=s(i(t));return{type:"FeatureCollection",properties:{...Ko(e.summary),queryIntent:e.summary.queryIntent.map(oa)},features:t,...n&&{bbox:n}}}},sa=async(e,t)=>"geometries"in e?Ii(e,t):(async(e,t)=>It(e,{...ia,...t},"FuzzySearch"))(e,t);export{S as APIErrorCode,h as SDKError,I as SDKServiceError,Mo as autocompleteSearch,Zs as buildPlaceWithEVAvailability,qs as buildPlacesWithEVAvailability,f as buildResponseError,m as buildValidationError,na as calculateRoute,Ks as customizeService,$s as evChargingStationsAvailability,Js as geocode,Qs as geocodeOne,Xs as geometryData,g as parseDefaultResponseError,ea as placeById,ta as reverseGeocode,sa as search};
//# sourceMappingURL=services.es.js.map
