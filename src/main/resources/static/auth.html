<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="DYGON - Sign in or create an account" />
    <title>DYGON - Access</title>

    <!-- Favicon -->
    <link rel="icon" href="./logo.png" />

    <!-- Design System -->
    <link rel="stylesheet" href="design-system.css" />

    <!-- Motion System -->
    <link rel="stylesheet" href="motion-system.css" />

    <!-- Auth Styles -->
    <link rel="stylesheet" href="auth.css" />

    <!-- Splash Screen -->
    <link rel="stylesheet" href="splash.css" />
  </head>

  <body>
    <!-- Cinematic Splash Screen Overlay -->
    <div id="splashOverlay"></div>

    <div class="auth-container">
      <!-- Left Branding Panel -->
      <aside class="auth-branding">
        <div class="branding-content">
          <img src="./logo.png" alt="DYGON" class="branding-logo" />
          <h1 class="branding-title">DYGON</h1>
          <p class="branding-tagline">Real-time college bus tracking system</p>

          <div class="branding-features">
            <div class="feature-item">
              <svg
                class="feature-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="10" />
                <polyline points="12 6 12 12 16 14" />
              </svg>
              <span>Track buses in real-time with live GPS</span>
            </div>
            <div class="feature-item">
              <svg
                class="feature-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" />
                <circle cx="12" cy="10" r="3" />
              </svg>
              <span>View routes and estimated arrivals</span>
            </div>
            <div class="feature-item">
              <svg
                class="feature-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                <polyline points="22 4 12 14.01 9 11.01" />
              </svg>
              <span>Secure access for students and staff</span>
            </div>
          </div>
        </div>
      </aside>

      <!-- Right Auth Panel -->
      <main class="auth-panel">
        <div class="auth-card">
          <!-- Mobile Header -->
          <div class="mobile-header">
            <img src="./logo.png" alt="DYGON" />
            <h1>DYGON</h1>
          </div>

          <!-- Alert Container -->
          <div class="alert alert-error" id="errorAlert"></div>
          <div class="alert alert-success" id="successAlert"></div>

          <!-- Role Selection -->
          <div class="role-section">
            <p class="section-label">I am a</p>
            <div class="role-cards">
              <button class="role-card active" data-role="client">
                <svg
                  class="role-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                  <circle cx="12" cy="7" r="4" />
                </svg>
                <span class="role-name">Student / Staff</span>
              </button>
              <button class="role-card" data-role="driver">
                <svg
                  class="role-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="12" cy="12" r="10" />
                  <polygon
                    points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"
                  />
                </svg>
                <span class="role-name">Driver</span>
              </button>
              <button class="role-card" data-role="admin">
                <svg
                  class="role-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                </svg>
                <span class="role-name">Admin</span>
              </button>
            </div>
          </div>

          <!-- Auth Tabs -->
          <div class="auth-tabs">
            <button class="auth-tab active" data-tab="signin">Sign In</button>
            <button class="auth-tab" data-tab="signup">Sign Up</button>
          </div>

          <!-- Sign In Form -->
          <form class="auth-form" id="signinForm">
            <div class="form-group" id="signinEmailGroup">
              <label class="form-label" for="signinEmail">Email address</label>
              <input
                type="email"
                id="signinEmail"
                class="form-input"
                placeholder="you@example.com"
              />
            </div>

            <div class="form-group hidden" id="signinUsernameGroup">
              <label class="form-label" for="signinUsername">Username</label>
              <input
                type="text"
                id="signinUsername"
                class="form-input"
                placeholder="Enter your username"
              />
            </div>

            <div class="form-group">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 0.5rem;
                "
              >
                <label
                  class="form-label"
                  for="signinPassword"
                  style="margin-bottom: 0"
                  >Password</label
                >
                <button
                  type="button"
                  id="forgotPasswordBtn"
                  style="
                    background: none;
                    border: none;
                    color: var(--primary);
                    font-size: 0.85rem;
                    font-weight: 500;
                    cursor: pointer;
                  "
                >
                  Forgot Password?
                </button>
              </div>
              <div class="password-wrapper">
                <input
                  type="password"
                  id="signinPassword"
                  class="form-input"
                  placeholder="••••••••"
                  required
                />
                <button
                  type="button"
                  class="password-toggle"
                  onclick="togglePassword('signinPassword', this)"
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                    <circle cx="12" cy="12" r="3" />
                  </svg>
                </button>
              </div>
            </div>

            <button type="submit" class="btn btn-primary" id="signinBtn">
              <span class="btn-text">Sign In</span>
            </button>
          </form>

          <!-- Reset Password Form -->
          <form class="auth-form hidden" id="resetPasswordForm">
            <div style="text-align: center; margin-bottom: 2rem">
              <h2
                style="
                  font-size: 1.5rem;
                  font-weight: 700;
                  color: var(--text-dark);
                  margin-bottom: 0.5rem;
                "
              >
                Forgot Password?
              </h2>
              <p style="color: var(--text-light); font-size: 0.9rem">
                Enter your email or username and we'll send you a reset link.
              </p>
            </div>

            <div class="form-group">
              <label class="form-label" for="resetIdentifier"
                >Email or Username</label
              >
              <input
                type="text"
                id="resetIdentifier"
                class="form-input"
                placeholder="Enter your email or username"
                required
              />
            </div>

            <div style="display: flex; gap: 1rem; margin-top: 1.5rem">
              <button
                type="button"
                class="btn"
                id="cancelResetBtn"
                style="
                  background: var(--bg-gray);
                  color: var(--text-dark);
                  flex: 1;
                  border: none;
                "
              >
                <span class="btn-text">Cancel</span>
              </button>
              <button
                type="submit"
                class="btn btn-primary"
                id="resetPasswordBtn"
                style="flex: 1"
              >
                <span class="btn-text">Send Link</span>
              </button>
            </div>
          </form>

          <!-- Sign Up Form -->
          <form class="auth-form hidden" id="signupForm">
            <!-- College Email Banner -->
            <div class="info-banner hidden" id="collegeEmailBanner">
              <svg
                class="info-banner-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="10" />
                <line x1="12" y1="16" x2="12" y2="12" />
                <line x1="12" y1="8" x2="12.01" y2="8" />
              </svg>
              <span>Use your @sairamtap.edu.in email address</span>
            </div>

            <div class="form-group">
              <label class="form-label" for="signupName">Full name</label>
              <input
                type="text"
                id="signupName"
                class="form-input"
                placeholder="John Doe"
                required
              />
            </div>

            <div class="form-group" id="signupEmailGroup">
              <label class="form-label" for="signupEmail" id="signupEmailLabel"
                >Email address</label
              >
              <input
                type="email"
                id="signupEmail"
                class="form-input"
                placeholder="you@example.com"
              />
            </div>

            <div class="form-group hidden" id="signupUsernameGroup">
              <label class="form-label" for="signupUsername">Username</label>
              <input
                type="text"
                id="signupUsername"
                class="form-input"
                placeholder="Choose a username"
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="signupPassword">Password</label>
              <div class="password-wrapper">
                <input
                  type="password"
                  id="signupPassword"
                  class="form-input"
                  placeholder="Min. 6 characters"
                  required
                  minlength="6"
                />
                <button
                  type="button"
                  class="password-toggle"
                  onclick="togglePassword('signupPassword', this)"
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                    <circle cx="12" cy="12" r="3" />
                  </svg>
                </button>
              </div>
            </div>

            <!-- Driver-specific fields (hidden by default) -->
            <div class="driver-fields hidden" id="driverFields">
              <div class="form-group">
                <label class="form-label" for="busNo">Bus Number</label>
                <input
                  type="text"
                  id="busNo"
                  class="form-input"
                  placeholder="e.g., BUS-001"
                />
              </div>
              <div class="form-group">
                <label class="form-label" for="phoneNo">Phone Number</label>
                <input
                  type="tel"
                  id="phoneNo"
                  class="form-input"
                  placeholder="+91 98765 43210"
                />
              </div>
              <div class="form-group">
                <label class="form-label" for="busName">Bus Name</label>
                <input
                  type="text"
                  id="busName"
                  class="form-input"
                  placeholder="e.g., Engineer - Route 5"
                />
              </div>
            </div>

            <button type="submit" class="btn btn-primary" id="signupBtn">
              <span class="btn-text">Create Account</span>
            </button>
          </form>

          <div class="auth-footer" id="signinFooter">
            <p>
              Don't have an account?
              <a
                href="#"
                onclick="
                  switchTab('signup');
                  return false;
                "
                >Sign up</a
              >
            </p>
          </div>

          <div class="auth-footer hidden" id="signupFooter">
            <p>
              Already have an account?
              <a
                href="#"
                onclick="
                  switchTab('signin');
                  return false;
                "
                >Sign in</a
              >
            </p>
          </div>
        </div>
      </main>
    </div>

    <!-- EmailJS SDK -->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
    ></script>

    <!-- Splash Screen Script -->
    <script src="splash.js"></script>

    <!-- Auth Script -->
    <script src="auth.js"></script>
  </body>
</html>
